<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Core2 for AWS IoT EduKit BSP: core2foraws_expports_digital_read</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8V9B1GPE56"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-8V9B1GPE56');
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="AWS_logo_RGB.png"/></td>
  <td id="projectalign">
   <div id="projectname">Core2 for AWS IoT EduKit BSP<span id="projectnumber">&#160;2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="expports.html">External Grove Connector Expansion Ports</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">core2foraws_expports_digital_read </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="fragment"><div class="line">esp_err_t <a class="code hl_function" href="core2foraws__expports_8h.html#a2ff29b8accafd1c26fc47af4645a15de">core2foraws_expports_digital_read</a>( gpio_num_t pin, <span class="keywordtype">bool</span> *level );</div>
<div class="ttc" id="acore2foraws__expports_8h_html_a2ff29b8accafd1c26fc47af4645a15de"><div class="ttname"><a href="core2foraws__expports_8h.html#a2ff29b8accafd1c26fc47af4645a15de">core2foraws_expports_digital_read</a></div><div class="ttdeci">esp_err_t core2foraws_expports_digital_read(gpio_num_t pin, bool *level)</div><div class="ttdoc">Reads the value from a specified digital pin — either 1 (high) or 0 (low).</div></div>
</div><!-- fragment --><p> Reads the value from a specified digital pin — either 1 (high) or 0 (low).</p>
<p >Pin reads high when connected to Vcc. In order for the pin to read high, the connected peripheral must use the available ground and Vcc pins and not an external power source.</p>
<dl class="section note"><dt>Note</dt><dd>To use the pin for another compatible purpose (e.g. depending on the pin — read, ADC, DAC, I2C, UART, etc.), you must first reset the pin with <a class="el" href="core2foraws__expports_8h.html#a54ab7b5c4ff54b17a2f4e48207a2b1b5">core2foraws_expports_pin_reset</a>.</dd>
<dd>
The AXP192 PMU is configured to output 5v on the expansion port's VCC pin. Some peripherals require 3.3V and must have the voltage reduced to avoid damage.</dd></dl>
<p><b>Example:</b></p>
<p >The example code creates a FreeRTOS task which periodically (1s) reads from GPIO 26 to see if a compatible peripheral is connected. The task prints the returned value to the serial monitor. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2foraws_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;MAIN_DIGITAL_READ_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> pin_read_task()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> state = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>( ;; )</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_function" href="core2foraws__expports_8h.html#a2ff29b8accafd1c26fc47af4645a15de">core2foraws_expports_digital_read</a>( GPIO_NUM_26, &amp;state );</div>
<div class="line">        ESP_LOGI( TAG, <span class="stringliteral">&quot;\tSensor plugged in ( 0=no / 1=yes ): %d&quot;</span>, state);</div>
<div class="line">        vTaskDelay( pdMS_TO_TICKS( 1000 ) );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ( err == ESP_OK )</div>
<div class="line">    {</div>
<div class="line">        xTaskCreatePinnedToCore( pin_read_task, <span class="stringliteral">&quot;read_pin&quot;</span>, 1024*3, NULL, 1, NULL, 1 );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="acore2foraws_8h_html"><div class="ttname"><a href="core2foraws_8h.html">core2foraws.h</a></div><div class="ttdoc">Core2 for AWS IoT EduKit general hardware driver APIs.</div></div>
<div class="ttc" id="acore2foraws_8h_html_a8589c127068e67d5474515365b558051"><div class="ttname"><a href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a></div><div class="ttdeci">esp_err_t core2foraws_init(void)</div><div class="ttdoc">Initializes enabled hardware features.</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pin</td><td>The GPIO pin to read. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">level</td><td>Pointer to set as the boolean digital level of the pin reading. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_FAIL : Failed to read </li>
</ul>
</dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
