<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Core2 for AWS IoT Kit BSP: core2foraws_expports.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8V9B1GPE56"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-8V9B1GPE56');
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="AWS_logo_RGB.png"/></td>
  <td id="projectalign">
   <div id="projectname">Core2 for AWS IoT Kit BSP<span id="projectnumber">&#160;2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b4313104a230dd94f699539f8e438d9b.html">Core2-for-AWS-IoT-Kit</a></li><li class="navelem"><a class="el" href="dir_75a483a8633115123af46fb2bb05dd34.html">lib</a></li><li class="navelem"><a class="el" href="dir_ca4c642c45f339f8d20114adf29f8f2c.html">expports</a></li><li class="navelem"><a class="el" href="dir_f601a7231f3fa42e3ec1e1a042fa4c3a.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">core2foraws_expports.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Core2 for AWS IoT Kit expansion ports hardware driver APIs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;driver/gpio.h&gt;</code><br />
<code>#include &lt;driver/uart.h&gt;</code><br />
<code>#include &lt;esp_err.h&gt;</code><br />
<code>#include &quot;i2c_manager.h&quot;</code><br />
</div>
<p><a href="core2foraws__expports_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae784eb494430f328a674932e03ee1b26"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#ae784eb494430f328a674932e03ee1b26">PORT_A_SDA_PIN</a>&#160;&#160;&#160;GPIO_NUM_32</td></tr>
<tr class="memdesc:ae784eb494430f328a674932e03ee1b26"><td class="mdescLeft">&#160;</td><td class="mdescRight">The I2C SDA pin on expansion port A.  <a href="core2foraws__expports_8h.html#ae784eb494430f328a674932e03ee1b26">More...</a><br /></td></tr>
<tr class="separator:ae784eb494430f328a674932e03ee1b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ed50e23fc6f3e2e2e5d3f58fd1e3d05"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a8ed50e23fc6f3e2e2e5d3f58fd1e3d05">PORT_A_SCL_PIN</a>&#160;&#160;&#160;GPIO_NUM_33</td></tr>
<tr class="memdesc:a8ed50e23fc6f3e2e2e5d3f58fd1e3d05"><td class="mdescLeft">&#160;</td><td class="mdescRight">The I2C SCL pin on expansion port A.  <a href="core2foraws__expports_8h.html#a8ed50e23fc6f3e2e2e5d3f58fd1e3d05">More...</a><br /></td></tr>
<tr class="separator:a8ed50e23fc6f3e2e2e5d3f58fd1e3d05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae44456f14b60aca216227a9e1c49d390"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#ae44456f14b60aca216227a9e1c49d390">I2C_NO_REGISTER_ADDR</a>&#160;&#160;&#160;I2C_NO_REG</td></tr>
<tr class="memdesc:ae44456f14b60aca216227a9e1c49d390"><td class="mdescLeft">&#160;</td><td class="mdescRight">Placeholder for I2C comms without a register address.  <a href="core2foraws__expports_8h.html#ae44456f14b60aca216227a9e1c49d390">More...</a><br /></td></tr>
<tr class="separator:ae44456f14b60aca216227a9e1c49d390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc191b4d5b52786c63d4692d6cb80d40"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#acc191b4d5b52786c63d4692d6cb80d40">PORT_B_ADC_PIN</a>&#160;&#160;&#160;GPIO_NUM_36</td></tr>
<tr class="memdesc:acc191b4d5b52786c63d4692d6cb80d40"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ADC pin on expansion port B.  <a href="core2foraws__expports_8h.html#acc191b4d5b52786c63d4692d6cb80d40">More...</a><br /></td></tr>
<tr class="separator:acc191b4d5b52786c63d4692d6cb80d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac708091286fa469920c756366ca4e683"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#ac708091286fa469920c756366ca4e683">PORT_B_DAC_PIN</a>&#160;&#160;&#160;GPIO_NUM_26</td></tr>
<tr class="memdesc:ac708091286fa469920c756366ca4e683"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DAC pin on expansion port B.  <a href="core2foraws__expports_8h.html#ac708091286fa469920c756366ca4e683">More...</a><br /></td></tr>
<tr class="separator:ac708091286fa469920c756366ca4e683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8764a8d2c486f2d66f86d995653cc833"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a>&#160;&#160;&#160;GPIO_NUM_14</td></tr>
<tr class="memdesc:a8764a8d2c486f2d66f86d995653cc833"><td class="mdescLeft">&#160;</td><td class="mdescRight">The UART transmission pin on expansion port C.  <a href="core2foraws__expports_8h.html#a8764a8d2c486f2d66f86d995653cc833">More...</a><br /></td></tr>
<tr class="separator:a8764a8d2c486f2d66f86d995653cc833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d7f3c77703d9c2c8654700f05f04f81"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a1d7f3c77703d9c2c8654700f05f04f81">PORT_C_UART_RX_PIN</a>&#160;&#160;&#160;GPIO_NUM_13</td></tr>
<tr class="memdesc:a1d7f3c77703d9c2c8654700f05f04f81"><td class="mdescLeft">&#160;</td><td class="mdescRight">The UART receiver pin on expansion port C.  <a href="core2foraws__expports_8h.html#a1d7f3c77703d9c2c8654700f05f04f81">More...</a><br /></td></tr>
<tr class="separator:a1d7f3c77703d9c2c8654700f05f04f81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a195b78547c193f3dadbbe023e7606e8b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a195b78547c193f3dadbbe023e7606e8b">PORT_C_UART_NUM</a>&#160;&#160;&#160;UART_NUM_2</td></tr>
<tr class="memdesc:a195b78547c193f3dadbbe023e7606e8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The default UART controller used for expansion port C.  <a href="core2foraws__expports_8h.html#a195b78547c193f3dadbbe023e7606e8b">More...</a><br /></td></tr>
<tr class="separator:a195b78547c193f3dadbbe023e7606e8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f25fe45d891de244a8135ae02fc9265"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a1f25fe45d891de244a8135ae02fc9265">UART_RX_BUF_SIZE</a>&#160;&#160;&#160;2048</td></tr>
<tr class="memdesc:a1f25fe45d891de244a8135ae02fc9265"><td class="mdescLeft">&#160;</td><td class="mdescRight">The default UART RX ring buffer size.  <a href="core2foraws__expports_8h.html#a1f25fe45d891de244a8135ae02fc9265">More...</a><br /></td></tr>
<tr class="separator:a1f25fe45d891de244a8135ae02fc9265"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2ff29b8accafd1c26fc47af4645a15de"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a2ff29b8accafd1c26fc47af4645a15de">core2foraws_expports_digital_read</a> (gpio_num_t pin, bool *level)</td></tr>
<tr class="memdesc:a2ff29b8accafd1c26fc47af4645a15de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the value from a specified digital pin — either 1 (high) or 0 (low).  <a href="core2foraws__expports_8h.html#a2ff29b8accafd1c26fc47af4645a15de">More...</a><br /></td></tr>
<tr class="separator:a2ff29b8accafd1c26fc47af4645a15de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cc0279f60f33499e3dc32c748faa607"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a2cc0279f60f33499e3dc32c748faa607">core2foraws_expports_digital_write</a> (gpio_num_t pin, const bool level)</td></tr>
<tr class="memdesc:a2cc0279f60f33499e3dc32c748faa607"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the value to a specified digital pin — either 1 (high) or 0 (low).  <a href="core2foraws__expports_8h.html#a2cc0279f60f33499e3dc32c748faa607">More...</a><br /></td></tr>
<tr class="separator:a2cc0279f60f33499e3dc32c748faa607"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54ab7b5c4ff54b17a2f4e48207a2b1b5"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a54ab7b5c4ff54b17a2f4e48207a2b1b5">core2foraws_expports_pin_reset</a> (gpio_num_t pin)</td></tr>
<tr class="memdesc:a54ab7b5c4ff54b17a2f4e48207a2b1b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the specified pin.  <a href="core2foraws__expports_8h.html#a54ab7b5c4ff54b17a2f4e48207a2b1b5">More...</a><br /></td></tr>
<tr class="separator:a54ab7b5c4ff54b17a2f4e48207a2b1b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37a130625c5303dbc06642fe2b71b25b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a37a130625c5303dbc06642fe2b71b25b">core2foraws_expports_i2c_begin</a> (void)</td></tr>
<tr class="memdesc:a37a130625c5303dbc06642fe2b71b25b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures expansion port A for use with an I2C peripheral.  <a href="core2foraws__expports_8h.html#a37a130625c5303dbc06642fe2b71b25b">More...</a><br /></td></tr>
<tr class="separator:a37a130625c5303dbc06642fe2b71b25b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a536178ddbe400acf90a2fa04ba5776a9"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a536178ddbe400acf90a2fa04ba5776a9">core2foraws_expports_i2c_read</a> (uint16_t device_address, uint32_t register_address, uint8_t *data, uint16_t length)</td></tr>
<tr class="memdesc:a536178ddbe400acf90a2fa04ba5776a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from the I2C peripheral attatched to expansion port A.  <a href="core2foraws__expports_8h.html#a536178ddbe400acf90a2fa04ba5776a9">More...</a><br /></td></tr>
<tr class="separator:a536178ddbe400acf90a2fa04ba5776a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eba726dfabc491e9b04d6a875fd25e9"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a7eba726dfabc491e9b04d6a875fd25e9">core2foraws_expports_i2c_write</a> (uint16_t device_address, uint32_t register_address, const uint8_t *data, uint16_t length)</td></tr>
<tr class="memdesc:a7eba726dfabc491e9b04d6a875fd25e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to the I2C peripheral attatched to expansion port A.  <a href="core2foraws__expports_8h.html#a7eba726dfabc491e9b04d6a875fd25e9">More...</a><br /></td></tr>
<tr class="separator:a7eba726dfabc491e9b04d6a875fd25e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa68a8ce01427dba8f8dd5b05195918d9"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#aa68a8ce01427dba8f8dd5b05195918d9">core2foraws_expports_i2c_close</a> (void)</td></tr>
<tr class="memdesc:aa68a8ce01427dba8f8dd5b05195918d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the thread-safe I2C port mutex.  <a href="core2foraws__expports_8h.html#aa68a8ce01427dba8f8dd5b05195918d9">More...</a><br /></td></tr>
<tr class="separator:aa68a8ce01427dba8f8dd5b05195918d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87364304a59960286d3e7e67d4f278e2"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a87364304a59960286d3e7e67d4f278e2">core2foraws_expports_adc_read</a> (int *raw_adc_value)</td></tr>
<tr class="memdesc:a87364304a59960286d3e7e67d4f278e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the raw ADC value from <a class="el" href="core2foraws__expports_8h.html#acc191b4d5b52786c63d4692d6cb80d40">PORT_B_ADC_PIN</a> (GPIO 36).  <a href="core2foraws__expports_8h.html#a87364304a59960286d3e7e67d4f278e2">More...</a><br /></td></tr>
<tr class="separator:a87364304a59960286d3e7e67d4f278e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0737d474fec3f03f5a8c46139d287cfd"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a0737d474fec3f03f5a8c46139d287cfd">core2foraws_expports_adc_mv_read</a> (uint32_t *adc_mvolts)</td></tr>
<tr class="memdesc:a0737d474fec3f03f5a8c46139d287cfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the calibrated ADC voltage from <a class="el" href="core2foraws__expports_8h.html#acc191b4d5b52786c63d4692d6cb80d40">PORT_B_ADC_PIN</a> (GPIO 36).  <a href="core2foraws__expports_8h.html#a0737d474fec3f03f5a8c46139d287cfd">More...</a><br /></td></tr>
<tr class="separator:a0737d474fec3f03f5a8c46139d287cfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bc8b93b6c00ad4491a7b4f7ad910e59"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a0bc8b93b6c00ad4491a7b4f7ad910e59">core2foraws_expports_dac_mv_write</a> (const uint16_t dac_mvolts)</td></tr>
<tr class="memdesc:a0bc8b93b6c00ad4491a7b4f7ad910e59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outputs the specified voltage (millivolts) to the DAC on <a class="el" href="core2foraws__expports_8h.html#ac708091286fa469920c756366ca4e683">PORT_B_DAC_PIN</a> (GPIO 26).  <a href="core2foraws__expports_8h.html#a0bc8b93b6c00ad4491a7b4f7ad910e59">More...</a><br /></td></tr>
<tr class="separator:a0bc8b93b6c00ad4491a7b4f7ad910e59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac52e3b43d38555f0ed5e1f315e2ed274"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#ac52e3b43d38555f0ed5e1f315e2ed274">core2foraws_expports_uart_begin</a> (uint32_t baud)</td></tr>
<tr class="memdesc:ac52e3b43d38555f0ed5e1f315e2ed274"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the UART interface on for <a class="el" href="core2foraws__expports_8h.html#a1d7f3c77703d9c2c8654700f05f04f81">PORT_C_UART_RX_PIN</a> (GPIO 13) and <a class="el" href="core2foraws__expports_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a> (GPIO 14) at the specified baud rate.  <a href="core2foraws__expports_8h.html#ac52e3b43d38555f0ed5e1f315e2ed274">More...</a><br /></td></tr>
<tr class="separator:ac52e3b43d38555f0ed5e1f315e2ed274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb85176507045a1bdd8e23925b0fc5ba"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#adb85176507045a1bdd8e23925b0fc5ba">core2foraws_expports_uart_write</a> (const char *message, size_t length, size_t *was_written_length)</td></tr>
<tr class="memdesc:adb85176507045a1bdd8e23925b0fc5ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes message to the UART2 interface through <a class="el" href="core2foraws__expports_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a> (GPIO 14).  <a href="core2foraws__expports_8h.html#adb85176507045a1bdd8e23925b0fc5ba">More...</a><br /></td></tr>
<tr class="separator:adb85176507045a1bdd8e23925b0fc5ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c96905f03597b16aa851d5a4ba05bec"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2foraws__expports_8h.html#a7c96905f03597b16aa851d5a4ba05bec">core2foraws_expports_uart_read</a> (uint8_t *message_buffer, size_t *was_read_length)</td></tr>
<tr class="memdesc:a7c96905f03597b16aa851d5a4ba05bec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read bytes from the UART2 interface through <a class="el" href="core2foraws__expports_8h.html#a1d7f3c77703d9c2c8654700f05f04f81">PORT_C_UART_RX_PIN</a> (GPIO 13).  <a href="core2foraws__expports_8h.html#a7c96905f03597b16aa851d5a4ba05bec">More...</a><br /></td></tr>
<tr class="separator:a7c96905f03597b16aa851d5a4ba05bec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Core2 for AWS IoT Kit expansion ports hardware driver APIs. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae784eb494430f328a674932e03ee1b26" name="ae784eb494430f328a674932e03ee1b26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae784eb494430f328a674932e03ee1b26">&#9670;&nbsp;</a></span>PORT_A_SDA_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_A_SDA_PIN&#160;&#160;&#160;GPIO_NUM_32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The I2C SDA pin on expansion port A. </p>
<p >This maps to GPIO 32 and can be used as the Serial Data Line (SDA) pin for I2C bus communication. Read more about [I2C capabilities of the ESP32 microcontroller and available APIs in the ESP-IDF](<a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/peripherals/i2c.html">https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/peripherals/i2c.html</a>). </p>

</div>
</div>
<a id="a8ed50e23fc6f3e2e2e5d3f58fd1e3d05" name="a8ed50e23fc6f3e2e2e5d3f58fd1e3d05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ed50e23fc6f3e2e2e5d3f58fd1e3d05">&#9670;&nbsp;</a></span>PORT_A_SCL_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_A_SCL_PIN&#160;&#160;&#160;GPIO_NUM_33</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The I2C SCL pin on expansion port A. </p>
<p >This maps to GPIO 33 and can be used as the Serial CLock Line (SCL) pin to synchronize I2C bus communication. Read more about <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/peripherals/i2c.html">I2C capabilities of the ESP32 microcontroller and available APIs in the ESP-IDF</a>. </p>

</div>
</div>
<a id="ae44456f14b60aca216227a9e1c49d390" name="ae44456f14b60aca216227a9e1c49d390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae44456f14b60aca216227a9e1c49d390">&#9670;&nbsp;</a></span>I2C_NO_REGISTER_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_NO_REGISTER_ADDR&#160;&#160;&#160;I2C_NO_REG</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Placeholder for I2C comms without a register address. </p>

</div>
</div>
<a id="acc191b4d5b52786c63d4692d6cb80d40" name="acc191b4d5b52786c63d4692d6cb80d40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc191b4d5b52786c63d4692d6cb80d40">&#9670;&nbsp;</a></span>PORT_B_ADC_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_B_ADC_PIN&#160;&#160;&#160;GPIO_NUM_36</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The ADC pin on expansion port B. </p>
<p >This maps to GPIO 36 and is capable of converting analog signals to digital. Read more about using <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/adc.html">ADCs with the ESP-IDF</a>. </p>

</div>
</div>
<a id="ac708091286fa469920c756366ca4e683" name="ac708091286fa469920c756366ca4e683"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac708091286fa469920c756366ca4e683">&#9670;&nbsp;</a></span>PORT_B_DAC_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_B_DAC_PIN&#160;&#160;&#160;GPIO_NUM_26</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The DAC pin on expansion port B. </p>
<p >This maps to GPIO 26 and is capable of converting digital signals to analog. Read more about using <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/dac.html">DACs with the ESP-IDF</a>. </p>

</div>
</div>
<a id="a8764a8d2c486f2d66f86d995653cc833" name="a8764a8d2c486f2d66f86d995653cc833"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8764a8d2c486f2d66f86d995653cc833">&#9670;&nbsp;</a></span>PORT_C_UART_TX_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_C_UART_TX_PIN&#160;&#160;&#160;GPIO_NUM_14</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The UART transmission pin on expansion port C. </p>
<p >This maps to GPIO 14 and can be used as the transmission channel for UART communication. Read more about <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/uart.html">UART communications with the ESP-IDF</a>. </p>

</div>
</div>
<a id="a1d7f3c77703d9c2c8654700f05f04f81" name="a1d7f3c77703d9c2c8654700f05f04f81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d7f3c77703d9c2c8654700f05f04f81">&#9670;&nbsp;</a></span>PORT_C_UART_RX_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_C_UART_RX_PIN&#160;&#160;&#160;GPIO_NUM_13</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The UART receiver pin on expansion port C. </p>
<p >This maps to GPIO 13 and can be used as the receiver channel for UART communication. Read more about <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/uart.html">UART communications with the ESP-IDF</a>. </p>

</div>
</div>
<a id="a195b78547c193f3dadbbe023e7606e8b" name="a195b78547c193f3dadbbe023e7606e8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a195b78547c193f3dadbbe023e7606e8b">&#9670;&nbsp;</a></span>PORT_C_UART_NUM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_C_UART_NUM&#160;&#160;&#160;UART_NUM_2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The default UART controller used for expansion port C. </p>
<p >This maps to UART controller UART2. Read more about <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/uart.html">UART communications with the ESP-IDF</a>. </p>

</div>
</div>
<a id="a1f25fe45d891de244a8135ae02fc9265" name="a1f25fe45d891de244a8135ae02fc9265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f25fe45d891de244a8135ae02fc9265">&#9670;&nbsp;</a></span>UART_RX_BUF_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_RX_BUF_SIZE&#160;&#160;&#160;2048</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The default UART RX ring buffer size. </p>
<p >This is the default size of the UART interface's receiver ring buffer. Read more about <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/uart.html">UART communications with the ESP-IDF</a>. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2ff29b8accafd1c26fc47af4645a15de" name="a2ff29b8accafd1c26fc47af4645a15de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ff29b8accafd1c26fc47af4645a15de">&#9670;&nbsp;</a></span>core2foraws_expports_digital_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_digital_read </td>
          <td>(</td>
          <td class="paramtype">gpio_num_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the value from a specified digital pin — either 1 (high) or 0 (low). </p>
<p >Pin reads high when connected to Vcc. In order for the pin to read high, the connected peripheral must use the available ground and Vcc pins and not an external power source.</p>
<dl class="section note"><dt>Note</dt><dd>To use the pin for another compatible purpose (e.g. depending on the pin — read, ADC, DAC, I2C, UART, etc.), you must first reset the pin with <a class="el" href="core2foraws__expports_8h.html#a54ab7b5c4ff54b17a2f4e48207a2b1b5">core2foraws_expports_pin_reset</a>.</dd>
<dd>
The AXP192 PMU is configured to output 5v on the expansion port's VCC pin. Some peripherals require 3.3V and must have the voltage reduced to avoid damage.</dd></dl>
<p><b>Example:</b></p>
<p >The example code creates a FreeRTOS task which periodically (1s) reads from GPIO 26 to see if a compatible peripheral is connected. The task prints the returned value to the serial monitor. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2foraws_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;MAIN_DIGITAL_READ_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> pin_read_task()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> state = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>( ;; )</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_function" href="core2foraws__expports_8h.html#a2ff29b8accafd1c26fc47af4645a15de">core2foraws_expports_digital_read</a>( GPIO_NUM_26, &amp;state );</div>
<div class="line">        ESP_LOGI( TAG, <span class="stringliteral">&quot;\tSensor plugged in ( 0=no / 1=yes ): %d&quot;</span>, state);</div>
<div class="line">        vTaskDelay( pdMS_TO_TICKS( 1000 ) );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ( err == ESP_OK )</div>
<div class="line">    {</div>
<div class="line">        xTaskCreatePinnedToCore( pin_read_task, <span class="stringliteral">&quot;read_pin&quot;</span>, 1024*3, NULL, 1, NULL, 1 );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="acore2foraws_8h_html"><div class="ttname"><a href="core2foraws_8h.html">core2foraws.h</a></div><div class="ttdoc">Core2 for AWS IoT Kit general hardware driver APIs.</div></div>
<div class="ttc" id="acore2foraws_8h_html_a8589c127068e67d5474515365b558051"><div class="ttname"><a href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a></div><div class="ttdeci">esp_err_t core2foraws_init(void)</div><div class="ttdoc">Initializes enabled hardware features.</div></div>
<div class="ttc" id="acore2foraws__expports_8h_html_a2ff29b8accafd1c26fc47af4645a15de"><div class="ttname"><a href="core2foraws__expports_8h.html#a2ff29b8accafd1c26fc47af4645a15de">core2foraws_expports_digital_read</a></div><div class="ttdeci">esp_err_t core2foraws_expports_digital_read(gpio_num_t pin, bool *level)</div><div class="ttdoc">Reads the value from a specified digital pin — either 1 (high) or 0 (low).</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pin</td><td>The GPIO pin to read. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">level</td><td>Pointer to set as the boolean digital level of the pin reading. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_FAIL : Failed to read </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a2cc0279f60f33499e3dc32c748faa607" name="a2cc0279f60f33499e3dc32c748faa607"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cc0279f60f33499e3dc32c748faa607">&#9670;&nbsp;</a></span>core2foraws_expports_digital_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_digital_write </td>
          <td>(</td>
          <td class="paramtype">gpio_num_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the value to a specified digital pin — either 1 (high) or 0 (low). </p>
<p >A high output is connected to Vcc. In order to complete the circuit, the connected peripheral must use the available ground.</p>
<dl class="section note"><dt>Note</dt><dd>To use the pin for another compatible purpose (e.g. depending on the pin — read, ADC, DAC, I2C, UART, etc.), you must first reset the pin with <a class="el" href="core2foraws__expports_8h.html#a54ab7b5c4ff54b17a2f4e48207a2b1b5">core2foraws_expports_pin_reset</a>.</dd>
<dd>
The AXP192 PMU is configured to output 5v on the expansion port's VCC pin. Some peripherals require 3.3V and must have the voltage reduced to avoid damage.</dd></dl>
<p><b>Example:</b></p>
<p >The example code creates a FreeRTOS task which periodically (1s) reads from GPIO 26 to see if a compatible peripheral is connected. The task prints the returned value to the serial monitor. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;MAIN_DIGITAL_WRITE_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> pin_write_task()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> output = 0;</div>
<div class="line">    <span class="keywordflow">for</span>( ;; )</div>
<div class="line">    {</div>
<div class="line">        esp_err_t err = ESP_FAIL;</div>
<div class="line">        </div>
<div class="line">        err = <a class="code hl_function" href="core2foraws__expports_8h.html#a2cc0279f60f33499e3dc32c748faa607">core2foraws_expports_digital_write</a>( GPIO_NUM_26, output );</div>
<div class="line">        <span class="keywordflow">if</span> ( err == ESP_OK )</div>
<div class="line">            ESP_LOGI( TAG, <span class="stringliteral">&quot;\tOutput on GPIO %d: %s&quot;</span>, GPIO_NUM_26, output ? <span class="stringliteral">&quot;HIGH&quot;</span> : <span class="stringliteral">&quot;LOW&quot;</span> );</div>
<div class="line"> </div>
<div class="line">        output = !output;</div>
<div class="line"> </div>
<div class="line">        vTaskDelay( pdMS_TO_TICKS( 1000 ) );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line">    xTaskCreatePinnedToCore( pin_write_task, <span class="stringliteral">&quot;write_pin&quot;</span>, 1024*3, NULL, 1, NULL, 1 );</div>
<div class="line">}</div>
<div class="ttc" id="acore2foraws__expports_8h_html_a2cc0279f60f33499e3dc32c748faa607"><div class="ttname"><a href="core2foraws__expports_8h.html#a2cc0279f60f33499e3dc32c748faa607">core2foraws_expports_digital_write</a></div><div class="ttdeci">esp_err_t core2foraws_expports_digital_write(gpio_num_t pin, const bool level)</div><div class="ttdoc">Writes the value to a specified digital pin — either 1 (high) or 0 (low).</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pin</td><td>The GPIO pin to write. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">level</td><td>The digital level of the pin reading. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_FAIL : Failed to write </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a54ab7b5c4ff54b17a2f4e48207a2b1b5" name="a54ab7b5c4ff54b17a2f4e48207a2b1b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54ab7b5c4ff54b17a2f4e48207a2b1b5">&#9670;&nbsp;</a></span>core2foraws_expports_pin_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_pin_reset </td>
          <td>(</td>
          <td class="paramtype">gpio_num_t&#160;</td>
          <td class="paramname"><em>pin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the specified pin. </p>
<p >This function is used to reset the pin configuration to either save memory or to use the pin for another compatible purpose (e.g. depending on the pin — read, ADC, DAC, I2C, UART, etc.), you must first reset the pin with <a class="el" href="core2foraws__expports_8h.html#a54ab7b5c4ff54b17a2f4e48207a2b1b5">core2foraws_expports_pin_reset</a>.</p>
<p ><b>Example:</b></p>
<p >The example code reads from GPIO 26 and then resets the pin. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;MAIN_PIN_RESET_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">bool</span> state = <span class="keyword">false</span>;</div>
<div class="line">    <a class="code hl_function" href="core2foraws__expports_8h.html#a2ff29b8accafd1c26fc47af4645a15de">core2foraws_expports_digital_read</a>( GPIO_NUM_26, &amp;state );</div>
<div class="line">        ESP_LOGI( TAG, <span class="stringliteral">&quot;\tSensor plugged in ( 0=no / 1=yes ): %d&quot;</span>, state);</div>
<div class="line">    <a class="code hl_function" href="core2foraws__expports_8h.html#a54ab7b5c4ff54b17a2f4e48207a2b1b5">core2foraws_expports_pin_reset</a>( GPIO_NUM_26 );</div>
<div class="line">}</div>
<div class="ttc" id="acore2foraws__expports_8h_html_a54ab7b5c4ff54b17a2f4e48207a2b1b5"><div class="ttname"><a href="core2foraws__expports_8h.html#a54ab7b5c4ff54b17a2f4e48207a2b1b5">core2foraws_expports_pin_reset</a></div><div class="ttdeci">esp_err_t core2foraws_expports_pin_reset(gpio_num_t pin)</div><div class="ttdoc">Resets the specified pin.</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pin</td><td>The GPIO pin to reset.  </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_FAIL : Failed to reset </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a37a130625c5303dbc06642fe2b71b25b" name="a37a130625c5303dbc06642fe2b71b25b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37a130625c5303dbc06642fe2b71b25b">&#9670;&nbsp;</a></span>core2foraws_expports_i2c_begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_i2c_begin </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures expansion port A for use with an I2C peripheral. </p>
<p >Configures the pin to use I2C.</p>
<dl class="section note"><dt>Note</dt><dd>The baud rate of the I2C device can be set in the Kconfig menu for the symbol <code>CONFIG_I2C_MANAGER_1_FREQ_HZ</code>. The default baud rate is 400KHz.</dd>
<dd>
The AXP192 PMU is configured to output 5v on the expansion port's VCC pin. Some peripherals require 3.3V and must have the voltage reduced to avoid damage.</dd></dl>
<p><b>Example:</b></p>
<p >The example creates a tasks which initializes the port for I2C, and loops every 10 seconds to read from a heart-rate sensor with the 8-bit device address 0xA0 (does not need to be right-shifted by 1-bit to be a 7-bit address). Since the device doesn't take a register address, use the placeholder macro <a class="el" href="core2foraws__expports_8h.html#ae44456f14b60aca216227a9e1c49d390">I2C_NO_REGISTER_ADDR</a>. At the end of the loop, the sensor reading is printed to the serial output. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2foraws_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define DEVICE_ADDRESS 0xA0</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;MAIN_I2C_EXAMPLE&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> i2c_test_task( <span class="keywordtype">void</span> *pvParameters )</div>
<div class="line">{</div>
<div class="line">    esp_err_t err = ESP_FAIL;</div>
<div class="line">    </div>
<div class="line">    err = <a class="code hl_function" href="core2foraws__expports_8h.html#a37a130625c5303dbc06642fe2b71b25b">core2foraws_expports_i2c_begin</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ( err == ESP_OK)</div>
<div class="line">    {</div>
<div class="line">        uint8_t heart_rate = 255;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>( ;; )</div>
<div class="line">        {</div>
<div class="line">            err = <a class="code hl_function" href="core2foraws__expports_8h.html#a536178ddbe400acf90a2fa04ba5776a9">core2foraws_expports_i2c_read</a>( DEVICE_ADDRESS, I2C_NO_REG, &amp;heart_rate, 1 );</div>
<div class="line">            <span class="keywordflow">if</span> ( !err )</div>
<div class="line">            {</div>
<div class="line">                ESP_LOGI(TAG, <span class="stringliteral">&quot;Heart Rate — %ubpm&quot;</span>, heart_rate);    </div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            vTaskDelay( pdMS_TO_TICKS( 10000 ) );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="core2foraws__expports_8h.html#aa68a8ce01427dba8f8dd5b05195918d9">core2foraws_expports_i2c_close</a>();</div>
<div class="line">    <a class="code hl_function" href="core2foraws__expports_8h.html#a54ab7b5c4ff54b17a2f4e48207a2b1b5">core2foraws_expports_pin_reset</a>();</div>
<div class="line">    vTaskDelete( NULL );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line">    xTaskCreatePinnedToCore(&amp;i2c_test_task, <span class="stringliteral">&quot;i2c_test_task&quot;</span>, 1024*4, NULL, 2, NULL, 1);</div>
<div class="line">}</div>
<div class="ttc" id="acore2foraws__expports_8h_html_a37a130625c5303dbc06642fe2b71b25b"><div class="ttname"><a href="core2foraws__expports_8h.html#a37a130625c5303dbc06642fe2b71b25b">core2foraws_expports_i2c_begin</a></div><div class="ttdeci">esp_err_t core2foraws_expports_i2c_begin(void)</div><div class="ttdoc">Configures expansion port A for use with an I2C peripheral.</div></div>
<div class="ttc" id="acore2foraws__expports_8h_html_a536178ddbe400acf90a2fa04ba5776a9"><div class="ttname"><a href="core2foraws__expports_8h.html#a536178ddbe400acf90a2fa04ba5776a9">core2foraws_expports_i2c_read</a></div><div class="ttdeci">esp_err_t core2foraws_expports_i2c_read(uint16_t device_address, uint32_t register_address, uint8_t *data, uint16_t length)</div><div class="ttdoc">Read from the I2C peripheral attatched to expansion port A.</div></div>
<div class="ttc" id="acore2foraws__expports_8h_html_aa68a8ce01427dba8f8dd5b05195918d9"><div class="ttname"><a href="core2foraws__expports_8h.html#aa68a8ce01427dba8f8dd5b05195918d9">core2foraws_expports_i2c_close</a></div><div class="ttdeci">esp_err_t core2foraws_expports_i2c_close(void)</div><div class="ttdoc">Removes the thread-safe I2C port mutex.</div></div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_ERR_INVALID_ARG : Driver parameter error </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a536178ddbe400acf90a2fa04ba5776a9" name="a536178ddbe400acf90a2fa04ba5776a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a536178ddbe400acf90a2fa04ba5776a9">&#9670;&nbsp;</a></span>core2foraws_expports_i2c_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_i2c_read </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>device_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>register_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from the I2C peripheral attatched to expansion port A. </p>
<p >A thread-safe method to read from the I2C peripheral.</p>
<p >Read more about <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/i2c.html">I2C capabilities of the ESP32 microcontroller and available APIs in the ESP-IDF</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The baud rate of the I2C device can be set in the Kconfig menu for the symbol <code>CONFIG_I2C_MANAGER_1_FREQ_HZ</code>. The default baud rate is 400KHz.</dd>
<dd>
The AXP192 PMU is configured to output 5v on the expansion port's VCC pin. Some peripherals require 3.3V and must have the voltage reduced to avoid damage.</dd></dl>
<p><b>Example:</b></p>
<p >The example creates a tasks which initializes the port for I2C, and loops every 10 seconds to read from a heart-rate sensor with the 8-bit device address 0xA0 (does not need to be right-shifted by 1-bit to be a 7-bit address). Since the device doesn't take a register address, use the placeholder macro <a class="el" href="core2foraws__expports_8h.html#ae44456f14b60aca216227a9e1c49d390">I2C_NO_REGISTER_ADDR</a>. At the end of the loop, the sensor reading is printed to the serial output. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2foraws_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define DEVICE_ADDRESS 0xA0</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;MAIN_I2C_EXAMPLE&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> i2c_test_task( <span class="keywordtype">void</span> *pvParameters )</div>
<div class="line">{</div>
<div class="line">    esp_err_t err = ESP_FAIL;</div>
<div class="line">    </div>
<div class="line">    err = <a class="code hl_function" href="core2foraws__expports_8h.html#a37a130625c5303dbc06642fe2b71b25b">core2foraws_expports_i2c_begin</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ( err == ESP_OK)</div>
<div class="line">    {</div>
<div class="line">        uint8_t heart_rate = 255;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>( ;; )</div>
<div class="line">        {</div>
<div class="line">            err = <a class="code hl_function" href="core2foraws__expports_8h.html#a536178ddbe400acf90a2fa04ba5776a9">core2foraws_expports_i2c_read</a>( DEVICE_ADDRESS, I2C_NO_REG, &amp;heart_rate, 1 );</div>
<div class="line">            <span class="keywordflow">if</span> ( !err )</div>
<div class="line">            {</div>
<div class="line">                ESP_LOGI(TAG, <span class="stringliteral">&quot;Heart Rate — %ubpm&quot;</span>, heart_rate);    </div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            vTaskDelay( pdMS_TO_TICKS( 10000 ) );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="core2foraws__expports_8h.html#aa68a8ce01427dba8f8dd5b05195918d9">core2foraws_expports_i2c_close</a>();</div>
<div class="line">    <a class="code hl_function" href="core2foraws__expports_8h.html#a54ab7b5c4ff54b17a2f4e48207a2b1b5">core2foraws_expports_pin_reset</a>();</div>
<div class="line">    vTaskDelete( NULL );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line">    xTaskCreatePinnedToCore(&amp;i2c_test_task, <span class="stringliteral">&quot;i2c_test_task&quot;</span>, 1024*4, NULL, 2, NULL, 1);</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">device_address</td><td>The 8-bit I2C peripheral address. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">register_address</td><td>The data register address. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Pointer to the data read from the I2C peripheral. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>The number of bytes to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_ERR_INVALID_ARG : Driver parameter error </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a7eba726dfabc491e9b04d6a875fd25e9" name="a7eba726dfabc491e9b04d6a875fd25e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eba726dfabc491e9b04d6a875fd25e9">&#9670;&nbsp;</a></span>core2foraws_expports_i2c_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_i2c_write </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>device_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>register_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write to the I2C peripheral attatched to expansion port A. </p>
<p >A thread-safe method to write to the I2C peripheral.</p>
<p >Read more about <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/i2c.html">I2C capabilities of the ESP32 microcontroller and available APIs in the ESP-IDF</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The baud rate of the I2C device can be set in the Kconfig menu for the symbol <code>CONFIG_I2C_MANAGER_1_FREQ_HZ</code>. The default baud rate is 400KHz.</dd>
<dd>
The AXP192 PMU is configured to output 5v on the expansion port's VCC pin. Some peripherals require 3.3V and must have the voltage reduced to avoid damage.</dd></dl>
<p><b>Example:</b></p>
<p >The example creates a tasks which initializes the port for I2C, and writes a single byte — 0x01 — to register 0x12 to a device with the address 0x29. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2foraws_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define DEVICE_ADDRESS 0x29</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;MAIN_I2C_EXAMPLE&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line">    esp_err_t err = ESP_FAIL;</div>
<div class="line">    uint8_t register_address = 0x12;</div>
<div class="line">    <span class="keyword">const</span> uint8_t write_byte = 0x01;</div>
<div class="line">    </div>
<div class="line">    err = <a class="code hl_function" href="core2foraws__expports_8h.html#a37a130625c5303dbc06642fe2b71b25b">core2foraws_expports_i2c_begin</a>();</div>
<div class="line">    <span class="keywordflow">if</span> ( err == ESP_OK )</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_function" href="core2foraws__expports_8h.html#a7eba726dfabc491e9b04d6a875fd25e9">core2foraws_expports_i2c_write</a>( DEVICE_ADDRESS, register_address, &amp;write_byte, <span class="keyword">sizeof</span>( write_byte ) )</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="acore2foraws__expports_8h_html_a7eba726dfabc491e9b04d6a875fd25e9"><div class="ttname"><a href="core2foraws__expports_8h.html#a7eba726dfabc491e9b04d6a875fd25e9">core2foraws_expports_i2c_write</a></div><div class="ttdeci">esp_err_t core2foraws_expports_i2c_write(uint16_t device_address, uint32_t register_address, const uint8_t *data, uint16_t length)</div><div class="ttdoc">Write to the I2C peripheral attatched to expansion port A.</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">device_address</td><td>The 8-bit I2C peripheral address. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">register_address</td><td>The data register address. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Pointer to the data to write to the I2C peripheral. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>The number of bytes to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_ERR_INVALID_ARG : Driver parameter error </li>
</ul>
</dd></dl>

</div>
</div>
<a id="aa68a8ce01427dba8f8dd5b05195918d9" name="aa68a8ce01427dba8f8dd5b05195918d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa68a8ce01427dba8f8dd5b05195918d9">&#9670;&nbsp;</a></span>core2foraws_expports_i2c_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_i2c_close </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the thread-safe I2C port mutex. </p>
<p >An optional function that can be called to remove the mutex associated with the external port.</p>
<p >Read more about <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/i2c.html">I2C capabilities of the ESP32 microcontroller and available APIs in the ESP-IDF</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The AXP192 PMU is configured to output 5v on the expansion port's VCC pin. Some peripherals require 3.3V and must have the voltage reduced to avoid damage.</dd></dl>
<p><b>Example:</b></p>
<p >The example creates a tasks which initializes the port for I2C, and loops every 10 seconds to read from a heart-rate sensor with the 8-bit device address 0xA0 (does not need to be right-shifted by 1-bit to be a 7-bit address). Since the device doesn't take a register address, use the placeholder macro <a class="el" href="core2foraws__expports_8h.html#ae44456f14b60aca216227a9e1c49d390">I2C_NO_REGISTER_ADDR</a>. At the end of the loop, the sensor reading is printed to the serial output. If <a class="el" href="core2foraws__expports_8h.html#a37a130625c5303dbc06642fe2b71b25b">core2foraws_expports_i2c_begin</a> returns an error, call <code>core2foraws_expports_i2c_close</code> and reset the pin. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2foraws_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define DEVICE_ADDRESS 0xA0</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;MAIN_I2C_EXAMPLE&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> i2c_test_task( <span class="keywordtype">void</span> *pvParameters )</div>
<div class="line">{</div>
<div class="line">    esp_err_t err = ESP_FAIL;</div>
<div class="line">    </div>
<div class="line">    err = <a class="code hl_function" href="core2foraws__expports_8h.html#a37a130625c5303dbc06642fe2b71b25b">core2foraws_expports_i2c_begin</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ( err == ESP_OK)</div>
<div class="line">    {</div>
<div class="line">        uint8_t heart_rate = 255;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>( ;; )</div>
<div class="line">        {</div>
<div class="line">            err = <a class="code hl_function" href="core2foraws__expports_8h.html#a536178ddbe400acf90a2fa04ba5776a9">core2foraws_expports_i2c_read</a>( DEVICE_ADDRESS, I2C_NO_REG, &amp;heart_rate, 1 );</div>
<div class="line">            <span class="keywordflow">if</span> ( !err )</div>
<div class="line">            {</div>
<div class="line">                ESP_LOGI(TAG, <span class="stringliteral">&quot;Heart Rate — %ubpm&quot;</span>, heart_rate);    </div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            vTaskDelay( pdMS_TO_TICKS( 10000 ) );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="core2foraws__expports_8h.html#aa68a8ce01427dba8f8dd5b05195918d9">core2foraws_expports_i2c_close</a>();</div>
<div class="line">    <a class="code hl_function" href="core2foraws__expports_8h.html#a54ab7b5c4ff54b17a2f4e48207a2b1b5">core2foraws_expports_pin_reset</a>();</div>
<div class="line">    vTaskDelete( NULL );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line">    xTaskCreatePinnedToCore(&amp;i2c_test_task, <span class="stringliteral">&quot;i2c_test_task&quot;</span>, 1024*4, NULL, 2, NULL, 1);</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_ERR_INVALID_ARG : Driver parameter error </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a87364304a59960286d3e7e67d4f278e2" name="a87364304a59960286d3e7e67d4f278e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87364304a59960286d3e7e67d4f278e2">&#9670;&nbsp;</a></span>core2foraws_expports_adc_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_adc_read </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>raw_adc_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the raw ADC value from <a class="el" href="core2foraws__expports_8h.html#acc191b4d5b52786c63d4692d6cb80d40">PORT_B_ADC_PIN</a> (GPIO 36). </p>
<p >This function reads the raw ADC value from Port B's Analog-to-Digital-Converter (ADC) on GPIO36. GPIO36 is the only pin on the external ports with access to the ADC. Read more about using <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/adc.html">ADCs with the ESP-IDF</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Uses the etched eFuse VRef calibration.</dd></dl>
<p><b>Example:</b></p>
<p >The example creates a FreeRTOS task which periodically (1s) reads the raw ADC value of the <a href="https://shop.m5stack.com/products/earth-sensor-unit">M5Stack EARTH</a> moisture sensor connected on Port B. It prints out the value to the serial output. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2foraws_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;RAW_ADC_READ_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> read_moisture_task( <span class="keywordtype">void</span> *pvParameters )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> adc_val = 0;</div>
<div class="line">    <span class="keywordflow">for</span>( ;; )</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_function" href="core2foraws__expports_8h.html#a87364304a59960286d3e7e67d4f278e2">core2foraws_expports_adc_read</a>( &amp;adc_val );</div>
<div class="line">        ESP_LOGI( TAG, <span class="stringliteral">&quot;\tMoisture ADC raw: %d&quot;</span>, adc_val );</div>
<div class="line"> </div>
<div class="line">        vTaskDelay( pdMS_TO_TICKS( 1000 ) );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line">    xTaskCreatePinnedToCore(read_moisture_task, <span class="stringliteral">&quot;moisture_raw&quot;</span>, 1024*3, NULL, 1, NULL, 1);</div>
<div class="line">}</div>
<div class="ttc" id="acore2foraws__expports_8h_html_a87364304a59960286d3e7e67d4f278e2"><div class="ttname"><a href="core2foraws__expports_8h.html#a87364304a59960286d3e7e67d4f278e2">core2foraws_expports_adc_read</a></div><div class="ttdeci">esp_err_t core2foraws_expports_adc_read(int *raw_adc_value)</div><div class="ttdoc">Read the raw ADC value from PORT_B_ADC_PIN (GPIO 36).</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">raw_adc_value</td><td>A pointer to the raw ADC reading. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_FAIL : Failed to write </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a0737d474fec3f03f5a8c46139d287cfd" name="a0737d474fec3f03f5a8c46139d287cfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0737d474fec3f03f5a8c46139d287cfd">&#9670;&nbsp;</a></span>core2foraws_expports_adc_mv_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_adc_mv_read </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>adc_mvolts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the calibrated ADC voltage from <a class="el" href="core2foraws__expports_8h.html#acc191b4d5b52786c63d4692d6cb80d40">PORT_B_ADC_PIN</a> (GPIO 36). </p>
<p >This function reads the raw ADC value from Port B's Analog-to-Digital-Converter (ADC) on GPIO36 and converts it to millivolts using the VRef calibration. GPIO36 is the only pin on the external ports with access to the ADC. Read more about using <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/adc.html">ADCs with the ESP-IDF</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Uses the etched eFuse VRef calibration.</dd></dl>
<p><b>Example:</b></p>
<p >The example creates a FreeRTOS task which periodically (1s) reads the ADC voltage of the <a href="https://shop.m5stack.com/products/earth-sensor-unit">M5Stack EARTH</a> moisture sensor connected on Port B. It prints out the value to the serial output. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2foraws_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;ADC_VOLTAGE_READ_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> read_moisture_task( <span class="keywordtype">void</span> *pvParameters )</div>
<div class="line">{</div>
<div class="line">    uint32 adc_volts = 0;</div>
<div class="line">    <span class="keywordflow">for</span>( ;; )</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_function" href="core2foraws__expports_8h.html#a0737d474fec3f03f5a8c46139d287cfd">core2foraws_expports_adc_mv_read</a>( &amp;adc_volts );</div>
<div class="line">        ESP_LOGI( TAG, <span class="stringliteral">&quot;\tMoisture ADC millivolts: %d&quot;</span>, adc_volts );</div>
<div class="line"> </div>
<div class="line">        vTaskDelay( pdMS_TO_TICKS( 1000 ) );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line">    xTaskCreatePinnedToCore(read_moisture_task, <span class="stringliteral">&quot;moisture_raw&quot;</span>, 1024*3, NULL, 1, NULL, 1);</div>
<div class="line">}</div>
<div class="ttc" id="acore2foraws__expports_8h_html_a0737d474fec3f03f5a8c46139d287cfd"><div class="ttname"><a href="core2foraws__expports_8h.html#a0737d474fec3f03f5a8c46139d287cfd">core2foraws_expports_adc_mv_read</a></div><div class="ttdeci">esp_err_t core2foraws_expports_adc_mv_read(uint32_t *adc_mvolts)</div><div class="ttdoc">Read the calibrated ADC voltage from PORT_B_ADC_PIN (GPIO 36).</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">adc_mvolts</td><td>Pointer to the voltage reading from the ADC in millivolts. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.3/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_FAIL : Failed to write </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a0bc8b93b6c00ad4491a7b4f7ad910e59" name="a0bc8b93b6c00ad4491a7b4f7ad910e59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bc8b93b6c00ad4491a7b4f7ad910e59">&#9670;&nbsp;</a></span>core2foraws_expports_dac_mv_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_dac_mv_write </td>
          <td>(</td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>dac_mvolts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Outputs the specified voltage (millivolts) to the DAC on <a class="el" href="core2foraws__expports_8h.html#ac708091286fa469920c756366ca4e683">PORT_B_DAC_PIN</a> (GPIO 26). </p>
<p >This function accepts a range from 0 to a maximum of VDD3P3_RTC (~3300mV).</p>
<p ><b>Example:</b></p>
<p >The example code sets the PORT_B_DAC_PIN (GPIO 26) pin mode to DAC and outputs 1,500mV. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2foraws_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line">    <a class="code hl_function" href="core2foraws__expports_8h.html#a0bc8b93b6c00ad4491a7b4f7ad910e59">core2foraws_expports_dac_mv_write</a>( 1500 );</div>
<div class="line">}</div>
<div class="ttc" id="acore2foraws__expports_8h_html_a0bc8b93b6c00ad4491a7b4f7ad910e59"><div class="ttname"><a href="core2foraws__expports_8h.html#a0bc8b93b6c00ad4491a7b4f7ad910e59">core2foraws_expports_dac_mv_write</a></div><div class="ttdeci">esp_err_t core2foraws_expports_dac_mv_write(const uint16_t dac_mvolts)</div><div class="ttdoc">Outputs the specified voltage (millivolts) to the DAC on PORT_B_DAC_PIN (GPIO 26).</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dac_mvolts</td><td>The voltage level to set the DAC pin in millivolts. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_FAIL : Failed to write </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ac52e3b43d38555f0ed5e1f315e2ed274" name="ac52e3b43d38555f0ed5e1f315e2ed274"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac52e3b43d38555f0ed5e1f315e2ed274">&#9670;&nbsp;</a></span>core2foraws_expports_uart_begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_uart_begin </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>baud</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the UART interface on for <a class="el" href="core2foraws__expports_8h.html#a1d7f3c77703d9c2c8654700f05f04f81">PORT_C_UART_RX_PIN</a> (GPIO 13) and <a class="el" href="core2foraws__expports_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a> (GPIO 14) at the specified baud rate. </p>
<p >This is a helper function to simplify building applications with UART. It preconfigures the UART communications with 8 bit word length, no parity bit, 1 bit for the number of stop bits, and hardware flow control disabled. It sets the baud rate to the user defined value and starts reading from the UART channel 2 and storing data into the ring buffer of length <a class="el" href="core2foraws__expports_8h.html#a1f25fe45d891de244a8135ae02fc9265">UART_RX_BUF_SIZE</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Usage of the UART convenience methods provided in this BSP aims to simplify development at the expense of compatibility and performance. The configuration above may not be suitable for your application or attached peripheral. For more information about UART communications on the Core2 for AWS IoT Kit using the ESP32 and how to create your own configuration, visit Espressif's official <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/uart.html">documentation</a>.</dd>
<dd>
The ESP32 is a 3.3v device and requires 3.3v on the UART TX/RX lines. Higher voltages requires the use of a level shifter.</dd></dl>
<p><b>Example:</b></p>
<p >The example below sets <a class="el" href="core2foraws__expports_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a> (GPIO 14 to transmit) and PORT_C_UART_RX_PIN (GPIO 13 to receive), and sets the UART baud rate to 115200. It then starts two FreeRTOS tasks — one that transmits "Hello from AWS IoT Kit" every two seconds and the other receives the message. The receiver task outputs the number of bytes read from the buffer, the number of bytes that remains unread in the ring buffer, and the message.</p>
<dl class="section note"><dt>Note</dt><dd>To receive the messages transmitted on the same device, run a female-female jumper wire from Port C's TX pin to PORT C's RX pin. <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;driver/uart.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;driver/gpio.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2foraws_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;MAIN_UART_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_tx_task( <span class="keywordtype">void</span> *pvParameters )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">while</span> ( 1 )</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *message = <span class="stringliteral">&quot;Hello from AWS IoT Kit&quot;</span>;</div>
<div class="line">        <span class="keywordtype">size_t</span> message_len = strlen( message ) + 1;</div>
<div class="line">        <span class="keywordtype">size_t</span> written_len = 0;</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="core2foraws__expports_8h.html#adb85176507045a1bdd8e23925b0fc5ba">core2foraws_expports_uart_write</a>( message, message_len, &amp;written_len );</div>
<div class="line">        ESP_LOGI( TAG, <span class="stringliteral">&quot;\tWrote %d out of % bytes&quot;</span>, written_len, message_len );</div>
<div class="line"> </div>
<div class="line">        vTaskDelay( pdMS_TO_TICKS( 2000 ) );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_rx_task( <span class="keywordtype">void</span> *arg )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">size_t</span> rxBytes;</div>
<div class="line">    uint8_t *data = heap_caps_malloc( <a class="code hl_define" href="core2foraws__expports_8h.html#a1f25fe45d891de244a8135ae02fc9265">UART_RX_BUF_SIZE</a>, MALLOC_CAP_SPIRAM ); <span class="comment">// Allocate space for message in external RAM</span></div>
<div class="line">    <span class="keywordflow">while</span> ( 1 )</div>
<div class="line">    {</div>
<div class="line">        esp_err_t err = <a class="code hl_function" href="core2foraws__expports_8h.html#a7c96905f03597b16aa851d5a4ba05bec">core2foraws_expports_uart_read</a>( data, &amp;rxBytes );</div>
<div class="line">        <span class="keywordflow">if</span> ( err == ESP_OK )</div>
<div class="line">        {</div>
<div class="line">            ESP_LOGI( TAG, <span class="stringliteral">&quot;\tRead %d bytes from UART. Received: &#39;%s&#39;&quot;</span>, rxBytes, data );</div>
<div class="line">        }</div>
<div class="line">        vTaskDelay( pdMS_TO_TICKS( 500 ) ); <span class="comment">// Read more frequently than transmit to ensure the messages are not erased from buffer.</span></div>
<div class="line">    }</div>
<div class="line">    free(data); <span class="comment">// Free memory from external RAM</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line">    esp_err_t err = ESP_FAIL;</div>
<div class="line">    err = <a class="code hl_function" href="core2foraws__expports_8h.html#ac52e3b43d38555f0ed5e1f315e2ed274">core2foraws_expports_uart_begin</a>( 115200 );</div>
<div class="line">    <span class="keywordflow">if</span> ( err == ESP_OK )</div>
<div class="line">    {</div>
<div class="line">        xTaskCreatePinnedToCore( uart_rx_task, <span class="stringliteral">&quot;uart_rx&quot;</span>, 1024*2, NULL, configMAX_PRIORITIES-2, NULL, 1);</div>
<div class="line">        xTaskCreatePinnedToCore( uart_tx_task, <span class="stringliteral">&quot;uart_tx&quot;</span>, 1024*2, NULL, configMAX_PRIORITIES-3, NULL, 1);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="acore2foraws__expports_8h_html_a1f25fe45d891de244a8135ae02fc9265"><div class="ttname"><a href="core2foraws__expports_8h.html#a1f25fe45d891de244a8135ae02fc9265">UART_RX_BUF_SIZE</a></div><div class="ttdeci">#define UART_RX_BUF_SIZE</div><div class="ttdoc">The default UART RX ring buffer size.</div><div class="ttdef"><b>Definition:</b> core2foraws_expports.h:140</div></div>
<div class="ttc" id="acore2foraws__expports_8h_html_a7c96905f03597b16aa851d5a4ba05bec"><div class="ttname"><a href="core2foraws__expports_8h.html#a7c96905f03597b16aa851d5a4ba05bec">core2foraws_expports_uart_read</a></div><div class="ttdeci">esp_err_t core2foraws_expports_uart_read(uint8_t *message_buffer, size_t *was_read_length)</div><div class="ttdoc">Read bytes from the UART2 interface through PORT_C_UART_RX_PIN (GPIO 13).</div></div>
<div class="ttc" id="acore2foraws__expports_8h_html_ac52e3b43d38555f0ed5e1f315e2ed274"><div class="ttname"><a href="core2foraws__expports_8h.html#ac52e3b43d38555f0ed5e1f315e2ed274">core2foraws_expports_uart_begin</a></div><div class="ttdeci">esp_err_t core2foraws_expports_uart_begin(uint32_t baud)</div><div class="ttdoc">Configures the UART interface on for PORT_C_UART_RX_PIN (GPIO 13) and PORT_C_UART_TX_PIN (GPIO 14) at...</div></div>
<div class="ttc" id="acore2foraws__expports_8h_html_adb85176507045a1bdd8e23925b0fc5ba"><div class="ttname"><a href="core2foraws__expports_8h.html#adb85176507045a1bdd8e23925b0fc5ba">core2foraws_expports_uart_write</a></div><div class="ttdeci">esp_err_t core2foraws_expports_uart_write(const char *message, size_t length, size_t *was_written_length)</div><div class="ttdoc">Writes message to the UART2 interface through PORT_C_UART_TX_PIN (GPIO 14).</div></div>
</div><!-- fragment --></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">baud</td><td>The baud rate (bits per second) of the UART2 channel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_FAIL : Failed to write </li>
</ul>
</dd></dl>

</div>
</div>
<a id="adb85176507045a1bdd8e23925b0fc5ba" name="adb85176507045a1bdd8e23925b0fc5ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb85176507045a1bdd8e23925b0fc5ba">&#9670;&nbsp;</a></span>core2foraws_expports_uart_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_uart_write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>was_written_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes message to the UART2 interface through <a class="el" href="core2foraws__expports_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a> (GPIO 14). </p>
<p >This is a helper function to simplify building applications with UART using 8 bit word length, no parity bit, 1 bit for the stop bit, and hardware flow control disabled. It sets the baud rate to the user defined value and starts reading from the UART channel 2 and storing data into the ring buffer of length <a class="el" href="core2foraws__expports_8h.html#a1f25fe45d891de244a8135ae02fc9265">UART_RX_BUF_SIZE</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Usage of the UART convenience methods provided in this BSP aims to simplify development at the expense of compatibility and performance. The configuration above may not be suitable for your application or attached peripheral. For more information about UART communications on the Core2 for AWS IoT Kit using the ESP32 and how to create your own configuration, visit Espressif's official <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/uart.html">documentation</a>.</dd>
<dd>
The ESP32 is a 3.3v device and requires 3.3v on the UART TX/RX lines. Higher voltages requires the use of a level shifter.</dd></dl>
<p><b>Example:</b></p>
<p >The example below sets <a class="el" href="core2foraws__expports_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a> (GPIO 14 to transmit) and PORT_C_UART_RX_PIN (GPIO 13 to receive), and sets the UART baud rate to 115200. It then starts two FreeRTOS tasks — one that transmits "Hello from AWS IoT Kit" every two seconds and the other receives the message. The receiver task outputs the number of bytes read from the buffer, the number of bytes that remains unread in the ring buffer, and the message.</p>
<dl class="section note"><dt>Note</dt><dd>To receive the messages transmitted on the same device, run a female-female jumper wire from Port C's TX pin to PORT C's RX pin. <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2foraws_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;MAIN_UART_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_tx_task( <span class="keywordtype">void</span> *pvParameters )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">while</span> ( 1 )</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *message = <span class="stringliteral">&quot;Hello from AWS IoT Kit&quot;</span>;</div>
<div class="line">        <span class="keywordtype">size_t</span> message_len = strlen( message ) + 1;</div>
<div class="line">        <span class="keywordtype">size_t</span> written_len = 0;</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="core2foraws__expports_8h.html#adb85176507045a1bdd8e23925b0fc5ba">core2foraws_expports_uart_write</a>( message, message_len, &amp;written_len );</div>
<div class="line">        ESP_LOGI( TAG, <span class="stringliteral">&quot;\tWrote %d out of % bytes&quot;</span>, written_len, message_len );</div>
<div class="line"> </div>
<div class="line">        vTaskDelay( pdMS_TO_TICKS( 2000 ) );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_rx_task( <span class="keywordtype">void</span> *arg )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">size_t</span> rxBytes;</div>
<div class="line">    uint8_t *data = heap_caps_malloc( <a class="code hl_define" href="core2foraws__expports_8h.html#a1f25fe45d891de244a8135ae02fc9265">UART_RX_BUF_SIZE</a>, MALLOC_CAP_SPIRAM ); <span class="comment">// Allocate space for message in external RAM</span></div>
<div class="line">    <span class="keywordflow">while</span> ( 1 )</div>
<div class="line">    {</div>
<div class="line">        esp_err_t err = <a class="code hl_function" href="core2foraws__expports_8h.html#a7c96905f03597b16aa851d5a4ba05bec">core2foraws_expports_uart_read</a>( data, &amp;rxBytes );</div>
<div class="line">        <span class="keywordflow">if</span> ( err == ESP_OK )</div>
<div class="line">        {</div>
<div class="line">            ESP_LOGI( TAG, <span class="stringliteral">&quot;\tRead %d bytes from UART. Received: &#39;%s&#39;&quot;</span>, rxBytes, data );</div>
<div class="line">        }</div>
<div class="line">        vTaskDelay( pdMS_TO_TICKS( 500 ) ); <span class="comment">// Read more frequently than transmit to ensure the messages are not erased from buffer.</span></div>
<div class="line">    }</div>
<div class="line">    free(data); <span class="comment">// Free memory from external RAM</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line">    esp_err_t err = ESP_FAIL;</div>
<div class="line">    err = <a class="code hl_function" href="core2foraws__expports_8h.html#ac52e3b43d38555f0ed5e1f315e2ed274">core2foraws_expports_uart_begin</a>( 115200 );</div>
<div class="line">    <span class="keywordflow">if</span> ( err == ESP_OK )</div>
<div class="line">    {</div>
<div class="line">        xTaskCreatePinnedToCore( uart_rx_task, <span class="stringliteral">&quot;uart_rx&quot;</span>, 1024*2, NULL, configMAX_PRIORITIES-2, NULL, 1);</div>
<div class="line">        xTaskCreatePinnedToCore( uart_tx_task, <span class="stringliteral">&quot;uart_tx&quot;</span>, 1024*2, NULL, configMAX_PRIORITIES-3, NULL, 1);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>A pointer to the message to be transmitted over UART2. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>The size of the message that you want to transmit. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">was_written_length</td><td>Pointer to the number of bytes sent over <a class="el" href="core2foraws__expports_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a> (GPIO 14). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_FAIL : Failed to write </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a7c96905f03597b16aa851d5a4ba05bec" name="a7c96905f03597b16aa851d5a4ba05bec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c96905f03597b16aa851d5a4ba05bec">&#9670;&nbsp;</a></span>core2foraws_expports_uart_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t core2foraws_expports_uart_read </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>message_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>was_read_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read bytes from the UART2 interface through <a class="el" href="core2foraws__expports_8h.html#a1d7f3c77703d9c2c8654700f05f04f81">PORT_C_UART_RX_PIN</a> (GPIO 13). </p>
<p >This is a helper function to simplify building applications with UART using 8 bit word length, no parity bit, 1 bit for the stop bit, and hardware flow control disabled. It sets the baud rate to the user defined value and starts reading from the UART channel 2 and storing data into the ring buffer of length <a class="el" href="core2foraws__expports_8h.html#a1f25fe45d891de244a8135ae02fc9265">UART_RX_BUF_SIZE</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Usage of the UART convenience methods provided in this BSP aims to simplify development at the expense of compatibility and performance. The configuration above may not be suitable for your application or attached peripheral. For more information about UART communications on the Core2 for AWS IoT Kit using the ESP32 and how to create your own configuration, visit Espressif's official <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/uart.html">documentation</a>.</dd>
<dd>
The ESP32 is a 3.3v device and requires 3.3v on the UART TX/RX lines. Higher voltages requires the use of a level shifter.</dd></dl>
<p><b>Example:</b></p>
<p >The example below sets <a class="el" href="core2foraws__expports_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a> (GPIO 14 to transmit) and PORT_C_UART_RX_PIN (GPIO 13 to receive), and sets the UART baud rate to 115200. It then starts two FreeRTOS tasks — one that transmits "Hello from AWS IoT Kit" every two seconds and the other receives the message. The receiver task outputs the number of bytes read from the buffer, the number of bytes that remains unread in the ring buffer, and the message.</p>
<dl class="section note"><dt>Note</dt><dd>To receive the messages transmitted on the same device, run a female-female jumper wire from Port C's TX pin to PORT C's RX pin. <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;esp_log.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2foraws_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;MAIN_UART_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_tx_task( <span class="keywordtype">void</span> *pvParameters )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">while</span> ( 1 )</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *message = <span class="stringliteral">&quot;Hello from AWS IoT Kit&quot;</span>;</div>
<div class="line">        <span class="keywordtype">size_t</span> message_len = strlen( message ) + 1;</div>
<div class="line">        <span class="keywordtype">size_t</span> written_len = 0;</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="core2foraws__expports_8h.html#adb85176507045a1bdd8e23925b0fc5ba">core2foraws_expports_uart_write</a>( message, message_len, &amp;written_len );</div>
<div class="line">        ESP_LOGI( TAG, <span class="stringliteral">&quot;\tWrote %d out of % bytes&quot;</span>, written_len, message_len );</div>
<div class="line"> </div>
<div class="line">        vTaskDelay( pdMS_TO_TICKS( 2000 ) );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_rx_task( <span class="keywordtype">void</span> *arg )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">size_t</span> rxBytes;</div>
<div class="line">    uint8_t *data = heap_caps_malloc( <a class="code hl_define" href="core2foraws__expports_8h.html#a1f25fe45d891de244a8135ae02fc9265">UART_RX_BUF_SIZE</a>, MALLOC_CAP_SPIRAM ); <span class="comment">// Allocate space for message in external RAM</span></div>
<div class="line">    <span class="keywordflow">while</span> ( 1 )</div>
<div class="line">    {</div>
<div class="line">        esp_err_t err = <a class="code hl_function" href="core2foraws__expports_8h.html#a7c96905f03597b16aa851d5a4ba05bec">core2foraws_expports_uart_read</a>( data, &amp;rxBytes );</div>
<div class="line">        <span class="keywordflow">if</span> ( err == ESP_OK )</div>
<div class="line">        {</div>
<div class="line">            ESP_LOGI( TAG, <span class="stringliteral">&quot;\tRead %d bytes from UART. Received: &#39;%s&#39;&quot;</span>, rxBytes, data );</div>
<div class="line">        }</div>
<div class="line">        vTaskDelay( pdMS_TO_TICKS( 500 ) ); <span class="comment">// Read more frequently than transmit to ensure the messages are not erased from buffer.</span></div>
<div class="line">    }</div>
<div class="line">    free(data); <span class="comment">// Free memory from external RAM</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2foraws_8h.html#a8589c127068e67d5474515365b558051">core2foraws_init</a>();</div>
<div class="line">    esp_err_t err = ESP_FAIL;</div>
<div class="line">    err = <a class="code hl_function" href="core2foraws__expports_8h.html#ac52e3b43d38555f0ed5e1f315e2ed274">core2foraws_expports_uart_begin</a>( 115200 );</div>
<div class="line">    <span class="keywordflow">if</span> ( err == ESP_OK )</div>
<div class="line">    {</div>
<div class="line">        xTaskCreatePinnedToCore( uart_rx_task, <span class="stringliteral">&quot;uart_rx&quot;</span>, 1024*2, NULL, configMAX_PRIORITIES-2, NULL, 1);</div>
<div class="line">        xTaskCreatePinnedToCore( uart_tx_task, <span class="stringliteral">&quot;uart_tx&quot;</span>, 1024*2, NULL, configMAX_PRIORITIES-3, NULL, 1);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">message_buffer</td><td>A pointer to the buffer read from UART2. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">was_read_length</td><td>Pointer to the number of bytes read from <a class="el" href="core2foraws__expports_8h.html#a1d7f3c77703d9c2c8654700f05f04f81">PORT_C_UART_RX_PIN</a> (GPIO 13). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>.<ul>
<li>ESP_OK : Success</li>
<li>ESP_FAIL : Failed to write </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
