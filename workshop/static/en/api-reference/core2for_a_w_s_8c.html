<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Core2 for AWS IoT Kit BSP: core2forAWS.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="AWS_logo_RGB.png"/></td>
  <td id="projectalign">
   <div id="projectname">Core2 for AWS IoT Kit BSP<span id="projectnumber">&#160;1.5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bf5ccd9971c0343ad1d8c4d8c914de23.html">core2forAWS</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">core2forAWS.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;stdbool.h&quot;</code><br />
<code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/task.h&quot;</code><br />
<code>#include &quot;freertos/queue.h&quot;</code><br />
<code>#include &quot;driver/spi_common.h&quot;</code><br />
<code>#include &quot;esp_idf_version.h&quot;</code><br />
<code>#include &quot;esp_system.h&quot;</code><br />
<code>#include &quot;esp_err.h&quot;</code><br />
<code>#include &quot;esp_log.h&quot;</code><br />
<code>#include &quot;<a class="el" href="core2for_a_w_s_8h_source.html">core2forAWS.h</a>&quot;</code><br />
<code>#include &lt;driver/adc.h&gt;</code><br />
<code>#include &lt;driver/dac.h&gt;</code><br />
<code>#include &quot;esp_adc_cal.h&quot;</code><br />
<code>#include &quot;soc/dac_channel.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a63baed8df076ce9dddaea1ae8694c1d8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a63baed8df076ce9dddaea1ae8694c1d8">DEFAULT_VREF</a>&#160;&#160;&#160;1100</td></tr>
<tr class="separator:a63baed8df076ce9dddaea1ae8694c1d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fb9fde533f9b9bc8e4ae31524c9ea51"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a7fb9fde533f9b9bc8e4ae31524c9ea51">ADC_CHANNEL</a>&#160;&#160;&#160;ADC1_CHANNEL_0</td></tr>
<tr class="separator:a7fb9fde533f9b9bc8e4ae31524c9ea51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7be6136584e673152582baf499d6a6c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#ae7be6136584e673152582baf499d6a6c">ADC_WIDTH</a>&#160;&#160;&#160;ADC_WIDTH_BIT_12</td></tr>
<tr class="separator:ae7be6136584e673152582baf499d6a6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a011dd77da2406fbe9beab9a63e042af9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a011dd77da2406fbe9beab9a63e042af9">ADC_ATTENUATION</a>&#160;&#160;&#160;ADC_ATTEN_DB_11</td></tr>
<tr class="separator:a011dd77da2406fbe9beab9a63e042af9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31c02544bc31e84a4bef7920f3efcb6c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a31c02544bc31e84a4bef7920f3efcb6c">DAC_CHANNEL</a>&#160;&#160;&#160;DAC_GPIO26_CHANNEL</td></tr>
<tr class="separator:a31c02544bc31e84a4bef7920f3efcb6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2d26161e62dd4844fdfad0a7da0bad3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#ac2d26161e62dd4844fdfad0a7da0bad3">DISPLAY_BRIGHTNESS_MIN_VOLT</a>&#160;&#160;&#160;2200</td></tr>
<tr class="separator:ac2d26161e62dd4844fdfad0a7da0bad3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c6500c6b1cd517bfc3eacb1e6147085"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a1c6500c6b1cd517bfc3eacb1e6147085">DISPLAY_BRIGHTNESS_MAX_VOLT</a>&#160;&#160;&#160;3300</td></tr>
<tr class="separator:a1c6500c6b1cd517bfc3eacb1e6147085"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31c507ab1a1074ac1ab0a4ce6bbba2f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a31c507ab1a1074ac1ab0a4ce6bbba2f6">LV_TICK_PERIOD_MS</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a31c507ab1a1074ac1ab0a4ce6bbba2f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3d850a3f56bbe0685b60726d8b53bece"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a> (void)</td></tr>
<tr class="memdesc:a3d850a3f56bbe0685b60726d8b53bece"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the power chip with default values, enables battery charging, and initializes all enabled hardware features.  <a href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">More...</a><br /></td></tr>
<tr class="separator:a3d850a3f56bbe0685b60726d8b53bece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f635870b3574190b1fbc84c6aa24675"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a0f635870b3574190b1fbc84c6aa24675">Core2ForAWS_Button_Init</a> (void)</td></tr>
<tr class="memdesc:a0f635870b3574190b1fbc84c6aa24675"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the <a class="el" href="core2for_a_w_s_8h.html#a2cd914992d1bec1babd0a7ffba0f554b">button_left</a>, <a class="el" href="core2for_a_w_s_8h.html#a49b277909900db7e85d6be2841301fe7">button_middle</a>, <a class="el" href="core2for_a_w_s_8h.html#ab6cde5989a3afec96cce115746efc606">button_right</a> virtual buttons using the ft6336u touch controller.  <a href="core2for_a_w_s_8c.html#a0f635870b3574190b1fbc84c6aa24675">More...</a><br /></td></tr>
<tr class="separator:a0f635870b3574190b1fbc84c6aa24675"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a714fd9c7943bbec98c54dfa17d778853"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a714fd9c7943bbec98c54dfa17d778853">Core2ForAWS_SDcard_Mount</a> (const char *mount_path, sdmmc_card_t **out_card)</td></tr>
<tr class="memdesc:a714fd9c7943bbec98c54dfa17d778853"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes and mounts the SD-Card.  <a href="core2for_a_w_s_8c.html#a714fd9c7943bbec98c54dfa17d778853">More...</a><br /></td></tr>
<tr class="separator:a714fd9c7943bbec98c54dfa17d778853"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c9c5029e08899a3b75a61e22cfa84a7"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a4c9c5029e08899a3b75a61e22cfa84a7">Core2ForAWS_SDcard_Unmount</a> (const char *mount_path, sdmmc_card_t *out_card)</td></tr>
<tr class="memdesc:a4c9c5029e08899a3b75a61e22cfa84a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the FAT partition and unmounts the SD-Card.  <a href="core2for_a_w_s_8c.html#a4c9c5029e08899a3b75a61e22cfa84a7">More...</a><br /></td></tr>
<tr class="separator:a4c9c5029e08899a3b75a61e22cfa84a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1264761696fc1cddfa86421f41654aeb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a1264761696fc1cddfa86421f41654aeb">Core2ForAWS_Motor_SetStrength</a> (uint8_t strength)</td></tr>
<tr class="memdesc:a1264761696fc1cddfa86421f41654aeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the speed of the vibration motor.  <a href="core2for_a_w_s_8c.html#a1264761696fc1cddfa86421f41654aeb">More...</a><br /></td></tr>
<tr class="separator:a1264761696fc1cddfa86421f41654aeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacc1c4dcaa8c695050dc274e81d6d188"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#aacc1c4dcaa8c695050dc274e81d6d188">Core2ForAWS_Speaker_Enable</a> (bool state)</td></tr>
<tr class="memdesc:aacc1c4dcaa8c695050dc274e81d6d188"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables or disables the NS4168 speaker amplifier.  <a href="core2for_a_w_s_8c.html#aacc1c4dcaa8c695050dc274e81d6d188">More...</a><br /></td></tr>
<tr class="separator:aacc1c4dcaa8c695050dc274e81d6d188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b859226349decb4411d11f48595e8f4"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a5b859226349decb4411d11f48595e8f4">Core2ForAWS_PMU_GetBatVolt</a> (void)</td></tr>
<tr class="memdesc:a5b859226349decb4411d11f48595e8f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the battery voltage with the AXP192.  <a href="core2for_a_w_s_8c.html#a5b859226349decb4411d11f48595e8f4">More...</a><br /></td></tr>
<tr class="separator:a5b859226349decb4411d11f48595e8f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20baa893832fff035a0bdef5240fbfc7"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a20baa893832fff035a0bdef5240fbfc7">Core2ForAWS_PMU_GetBatCurrent</a> (void)</td></tr>
<tr class="memdesc:a20baa893832fff035a0bdef5240fbfc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the battery current draw with the AXP192.  <a href="core2for_a_w_s_8c.html#a20baa893832fff035a0bdef5240fbfc7">More...</a><br /></td></tr>
<tr class="separator:a20baa893832fff035a0bdef5240fbfc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee63e7a3f7aeea10fb03c7bbe3ea6f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#abee63e7a3f7aeea10fb03c7bbe3ea6f4">Core2ForAWS_PMU_SetPowerIn</a> (uint8_t mode)</td></tr>
<tr class="separator:abee63e7a3f7aeea10fb03c7bbe3ea6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcdde4ebb075c61f0bfa937009de6c64"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#adcdde4ebb075c61f0bfa937009de6c64">Core2ForAWS_PMU_Init</a> (uint16_t ldo2_volt, uint16_t ldo3_volt, uint16_t dc2_volt, uint16_t dc3_volt)</td></tr>
<tr class="memdesc:adcdde4ebb075c61f0bfa937009de6c64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the AXP192 Power Management Unit (PMU).  <a href="core2for_a_w_s_8c.html#adcdde4ebb075c61f0bfa937009de6c64">More...</a><br /></td></tr>
<tr class="separator:adcdde4ebb075c61f0bfa937009de6c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab23f5196841f3572d2c7cc52d053f435"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#ab23f5196841f3572d2c7cc52d053f435">Core2ForAWS_Sk6812_Init</a> (void)</td></tr>
<tr class="memdesc:ab23f5196841f3572d2c7cc52d053f435"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the SK6812 LED bars.  <a href="core2for_a_w_s_8c.html#ab23f5196841f3572d2c7cc52d053f435">More...</a><br /></td></tr>
<tr class="separator:ab23f5196841f3572d2c7cc52d053f435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15558a37529e89394598df0128d721c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a15558a37529e89394598df0128d721c9">Core2ForAWS_Sk6812_SetColor</a> (uint16_t pos, uint32_t color)</td></tr>
<tr class="memdesc:a15558a37529e89394598df0128d721c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the color of a single LED in the LED bars.  <a href="core2for_a_w_s_8c.html#a15558a37529e89394598df0128d721c9">More...</a><br /></td></tr>
<tr class="separator:a15558a37529e89394598df0128d721c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dde1ef368e54c5c39db6257b0a83e13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a5dde1ef368e54c5c39db6257b0a83e13">Core2ForAWS_Sk6812_SetSideColor</a> (uint8_t side, uint32_t color)</td></tr>
<tr class="memdesc:a5dde1ef368e54c5c39db6257b0a83e13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the color of all the LEDs on one side of the LED bars.  <a href="core2for_a_w_s_8c.html#a5dde1ef368e54c5c39db6257b0a83e13">More...</a><br /></td></tr>
<tr class="separator:a5dde1ef368e54c5c39db6257b0a83e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c6c1bbeda65f03428a3fa780c1d3dc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a5c6c1bbeda65f03428a3fa780c1d3dc8">Core2ForAWS_Sk6812_SetBrightness</a> (uint8_t brightness)</td></tr>
<tr class="memdesc:a5c6c1bbeda65f03428a3fa780c1d3dc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the brightness of the LED bars.  <a href="core2for_a_w_s_8c.html#a5c6c1bbeda65f03428a3fa780c1d3dc8">More...</a><br /></td></tr>
<tr class="separator:a5c6c1bbeda65f03428a3fa780c1d3dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54bd0bce86a0ed5ea5ba2ca0c7e9ef32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32">Core2ForAWS_Sk6812_Show</a> (void)</td></tr>
<tr class="memdesc:a54bd0bce86a0ed5ea5ba2ca0c7e9ef32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the LEDs in the LED bars with any new values set using Core2ForAWS_Sk6812_SetColor, Core2ForAWS_Sk6812_SetSideColor or Core2ForAWS_Sk6812_SetBrightness.  <a href="core2for_a_w_s_8c.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32">More...</a><br /></td></tr>
<tr class="separator:a54bd0bce86a0ed5ea5ba2ca0c7e9ef32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a179990c112d4839cabae1c9e86a7a6b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a179990c112d4839cabae1c9e86a7a6b9">Core2ForAWS_Sk6812_Clear</a> (void)</td></tr>
<tr class="memdesc:a179990c112d4839cabae1c9e86a7a6b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns off the LEDs in the LED bars and removes any set color.  <a href="core2for_a_w_s_8c.html#a179990c112d4839cabae1c9e86a7a6b9">More...</a><br /></td></tr>
<tr class="separator:a179990c112d4839cabae1c9e86a7a6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a8fa1e5529ce59892d5176c7249eb2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a5a8fa1e5529ce59892d5176c7249eb2a">Core2ForAWS_Display_Init</a> (void)</td></tr>
<tr class="memdesc:a5a8fa1e5529ce59892d5176c7249eb2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the display.  <a href="core2for_a_w_s_8c.html#a5a8fa1e5529ce59892d5176c7249eb2a">More...</a><br /></td></tr>
<tr class="separator:a5a8fa1e5529ce59892d5176c7249eb2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67a760b89e44e6bd0c96f90cc6aca47d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a67a760b89e44e6bd0c96f90cc6aca47d">Core2ForAWS_Display_SetBrightness</a> (uint8_t brightness)</td></tr>
<tr class="memdesc:a67a760b89e44e6bd0c96f90cc6aca47d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the brightness of the display.  <a href="core2for_a_w_s_8c.html#a67a760b89e44e6bd0c96f90cc6aca47d">More...</a><br /></td></tr>
<tr class="separator:a67a760b89e44e6bd0c96f90cc6aca47d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f638e20c3c332cd77a84df3e133f4e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a6f638e20c3c332cd77a84df3e133f4e7">Core2ForAWS_LED_Enable</a> (uint8_t enable)</td></tr>
<tr class="memdesc:a6f638e20c3c332cd77a84df3e133f4e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns on or off green LED.  <a href="core2for_a_w_s_8c.html#a6f638e20c3c332cd77a84df3e133f4e7">More...</a><br /></td></tr>
<tr class="separator:a6f638e20c3c332cd77a84df3e133f4e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20b1459685901f232474236d0fc6c23f"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a20b1459685901f232474236d0fc6c23f">Core2ForAWS_Port_PinMode</a> (gpio_num_t pin, <a class="el" href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4db">pin_mode_t</a> mode)</td></tr>
<tr class="memdesc:a20b1459685901f232474236d0fc6c23f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the pin mode of the specified pin.  <a href="core2for_a_w_s_8c.html#a20b1459685901f232474236d0fc6c23f">More...</a><br /></td></tr>
<tr class="separator:a20b1459685901f232474236d0fc6c23f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae40c69633879f4b82c939e2c63814e81"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#ae40c69633879f4b82c939e2c63814e81">Core2ForAWS_Port_Read</a> (gpio_num_t pin)</td></tr>
<tr class="memdesc:ae40c69633879f4b82c939e2c63814e81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the value from a specified digital pin that's set as an input — either 1 (high) or 0 (low).  <a href="core2for_a_w_s_8c.html#ae40c69633879f4b82c939e2c63814e81">More...</a><br /></td></tr>
<tr class="separator:ae40c69633879f4b82c939e2c63814e81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e481da2a60b6f0c46d6a4a5b2c8453e"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a7e481da2a60b6f0c46d6a4a5b2c8453e">Core2ForAWS_Port_Write</a> (gpio_num_t pin, bool level)</td></tr>
<tr class="memdesc:a7e481da2a60b6f0c46d6a4a5b2c8453e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the specified level (0 or 1) to the specified digital pin.  <a href="core2for_a_w_s_8c.html#a7e481da2a60b6f0c46d6a4a5b2c8453e">More...</a><br /></td></tr>
<tr class="separator:a7e481da2a60b6f0c46d6a4a5b2c8453e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b48f559933447fce3325cf959c07e4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a3b48f559933447fce3325cf959c07e4f">Core2ForAWS_Port_A_I2C_Begin</a> (uint8_t device_address, uint32_t baud)</td></tr>
<tr class="memdesc:a3b48f559933447fce3325cf959c07e4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a peripheral connected to expansion port A.  <a href="core2for_a_w_s_8c.html#a3b48f559933447fce3325cf959c07e4f">More...</a><br /></td></tr>
<tr class="separator:a3b48f559933447fce3325cf959c07e4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca28405ee964ae83568a6b483d5a11d"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a8ca28405ee964ae83568a6b483d5a11d">Core2ForAWS_Port_A_I2C_Read</a> (<a class="el" href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a> device, uint32_t register_address, uint8_t *data, uint16_t length)</td></tr>
<tr class="memdesc:a8ca28405ee964ae83568a6b483d5a11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads from I2C peripheral connected to expansion port A.  <a href="core2for_a_w_s_8c.html#a8ca28405ee964ae83568a6b483d5a11d">More...</a><br /></td></tr>
<tr class="separator:a8ca28405ee964ae83568a6b483d5a11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab925bc40cacc623fa6ac2d74ed4d822c"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#ab925bc40cacc623fa6ac2d74ed4d822c">Core2ForAWS_Port_A_I2C_Write</a> (<a class="el" href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a> device, uint32_t register_address, uint8_t *data, uint16_t length)</td></tr>
<tr class="memdesc:ab925bc40cacc623fa6ac2d74ed4d822c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes to I2C peripheral connected to expansion port A.  <a href="core2for_a_w_s_8c.html#ab925bc40cacc623fa6ac2d74ed4d822c">More...</a><br /></td></tr>
<tr class="separator:ab925bc40cacc623fa6ac2d74ed4d822c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a057922ede225141694594f4adda7df7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a057922ede225141694594f4adda7df7b">Core2ForAWS_Port_A_I2C_Close</a> (<a class="el" href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a> device)</td></tr>
<tr class="memdesc:a057922ede225141694594f4adda7df7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the configuration pointer to the I2C peripheral connected on port A.  <a href="core2for_a_w_s_8c.html#a057922ede225141694594f4adda7df7b">More...</a><br /></td></tr>
<tr class="separator:a057922ede225141694594f4adda7df7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08ed8dbebc74ab97512f434eeef4c77c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a08ed8dbebc74ab97512f434eeef4c77c">Core2ForAWS_Port_B_ADC_ReadRaw</a> (void)</td></tr>
<tr class="memdesc:a08ed8dbebc74ab97512f434eeef4c77c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the raw ADC value from GPIO36.  <a href="core2for_a_w_s_8c.html#a08ed8dbebc74ab97512f434eeef4c77c">More...</a><br /></td></tr>
<tr class="separator:a08ed8dbebc74ab97512f434eeef4c77c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a297b6764c8ca7a522a15d7384756c285"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a297b6764c8ca7a522a15d7384756c285">Core2ForAWS_Port_B_ADC_ReadMilliVolts</a> (void)</td></tr>
<tr class="memdesc:a297b6764c8ca7a522a15d7384756c285"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the calibrated ADC voltage from GPIO36.  <a href="core2for_a_w_s_8c.html#a297b6764c8ca7a522a15d7384756c285">More...</a><br /></td></tr>
<tr class="separator:a297b6764c8ca7a522a15d7384756c285"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af441b13016b08aa5781a6096c758f8eb"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#af441b13016b08aa5781a6096c758f8eb">Core2ForAWS_Port_B_DAC_WriteMilliVolts</a> (uint16_t mvolts)</td></tr>
<tr class="memdesc:af441b13016b08aa5781a6096c758f8eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outputs the specified voltage (millivolts) to the DAC.  <a href="core2for_a_w_s_8c.html#af441b13016b08aa5781a6096c758f8eb">More...</a><br /></td></tr>
<tr class="separator:af441b13016b08aa5781a6096c758f8eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41a0d4cfbf16f792180d7ca55e664095"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a41a0d4cfbf16f792180d7ca55e664095">Core2ForAWS_Port_C_UART_Begin</a> (uint32_t baud)</td></tr>
<tr class="memdesc:a41a0d4cfbf16f792180d7ca55e664095"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the UART interface at the specified baud rate.  <a href="core2for_a_w_s_8c.html#a41a0d4cfbf16f792180d7ca55e664095">More...</a><br /></td></tr>
<tr class="separator:a41a0d4cfbf16f792180d7ca55e664095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa205e433ced4fdae489d8165883c2f76"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#aa205e433ced4fdae489d8165883c2f76">Core2ForAWS_Port_C_UART_Send</a> (const char *message, size_t len)</td></tr>
<tr class="memdesc:aa205e433ced4fdae489d8165883c2f76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a specified length of a user defined message over UART2.  <a href="core2for_a_w_s_8c.html#aa205e433ced4fdae489d8165883c2f76">More...</a><br /></td></tr>
<tr class="separator:aa205e433ced4fdae489d8165883c2f76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b09041a7dedd7ae8cb776382478d191"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a8b09041a7dedd7ae8cb776382478d191">Core2ForAWS_Port_C_UART_Receive</a> (uint8_t *message_buffer)</td></tr>
<tr class="memdesc:a8b09041a7dedd7ae8cb776382478d191"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads messages in the UART2 receiver ring buffer.  <a href="core2for_a_w_s_8c.html#a8b09041a7dedd7ae8cb776382478d191">More...</a><br /></td></tr>
<tr class="separator:a8b09041a7dedd7ae8cb776382478d191"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2cd914992d1bec1babd0a7ffba0f554b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_button__t.html">Button_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a2cd914992d1bec1babd0a7ffba0f554b">button_left</a></td></tr>
<tr class="memdesc:a2cd914992d1bec1babd0a7ffba0f554b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Left virtual touch button.  <a href="core2for_a_w_s_8c.html#a2cd914992d1bec1babd0a7ffba0f554b">More...</a><br /></td></tr>
<tr class="separator:a2cd914992d1bec1babd0a7ffba0f554b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49b277909900db7e85d6be2841301fe7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_button__t.html">Button_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a49b277909900db7e85d6be2841301fe7">button_middle</a></td></tr>
<tr class="memdesc:a49b277909900db7e85d6be2841301fe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Middle virtual touch button.  <a href="core2for_a_w_s_8c.html#a49b277909900db7e85d6be2841301fe7">More...</a><br /></td></tr>
<tr class="separator:a49b277909900db7e85d6be2841301fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6cde5989a3afec96cce115746efc606"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_button__t.html">Button_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#ab6cde5989a3afec96cce115746efc606">button_right</a></td></tr>
<tr class="memdesc:ab6cde5989a3afec96cce115746efc606"><td class="mdescLeft">&#160;</td><td class="mdescRight">Right virtual touch button.  <a href="core2for_a_w_s_8c.html#ab6cde5989a3afec96cce115746efc606">More...</a><br /></td></tr>
<tr class="separator:ab6cde5989a3afec96cce115746efc606"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04cd1767c994343c4548fb3932fb3cfc"><td class="memItemLeft" align="right" valign="top">pixel_settings_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a04cd1767c994343c4548fb3932fb3cfc">px</a></td></tr>
<tr class="separator:a04cd1767c994343c4548fb3932fb3cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a1ad60c25ec8207f8d723197855a1a1"><td class="memItemLeft" align="right" valign="top">SemaphoreHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core2for_a_w_s_8c.html#a2a1ad60c25ec8207f8d723197855a1a1">xGuiSemaphore</a></td></tr>
<tr class="memdesc:a2a1ad60c25ec8207f8d723197855a1a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">FreeRTOS semaphore to be used when performing any operation on the display.  <a href="core2for_a_w_s_8c.html#a2a1ad60c25ec8207f8d723197855a1a1">More...</a><br /></td></tr>
<tr class="separator:a2a1ad60c25ec8207f8d723197855a1a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a63baed8df076ce9dddaea1ae8694c1d8" name="a63baed8df076ce9dddaea1ae8694c1d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63baed8df076ce9dddaea1ae8694c1d8">&#9670;&nbsp;</a></span>DEFAULT_VREF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_VREF&#160;&#160;&#160;1100</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7fb9fde533f9b9bc8e4ae31524c9ea51" name="a7fb9fde533f9b9bc8e4ae31524c9ea51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fb9fde533f9b9bc8e4ae31524c9ea51">&#9670;&nbsp;</a></span>ADC_CHANNEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_CHANNEL&#160;&#160;&#160;ADC1_CHANNEL_0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae7be6136584e673152582baf499d6a6c" name="ae7be6136584e673152582baf499d6a6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7be6136584e673152582baf499d6a6c">&#9670;&nbsp;</a></span>ADC_WIDTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_WIDTH&#160;&#160;&#160;ADC_WIDTH_BIT_12</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a011dd77da2406fbe9beab9a63e042af9" name="a011dd77da2406fbe9beab9a63e042af9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a011dd77da2406fbe9beab9a63e042af9">&#9670;&nbsp;</a></span>ADC_ATTENUATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_ATTENUATION&#160;&#160;&#160;ADC_ATTEN_DB_11</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a31c02544bc31e84a4bef7920f3efcb6c" name="a31c02544bc31e84a4bef7920f3efcb6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31c02544bc31e84a4bef7920f3efcb6c">&#9670;&nbsp;</a></span>DAC_CHANNEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DAC_CHANNEL&#160;&#160;&#160;DAC_GPIO26_CHANNEL</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac2d26161e62dd4844fdfad0a7da0bad3" name="ac2d26161e62dd4844fdfad0a7da0bad3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2d26161e62dd4844fdfad0a7da0bad3">&#9670;&nbsp;</a></span>DISPLAY_BRIGHTNESS_MIN_VOLT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DISPLAY_BRIGHTNESS_MIN_VOLT&#160;&#160;&#160;2200</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1c6500c6b1cd517bfc3eacb1e6147085" name="a1c6500c6b1cd517bfc3eacb1e6147085"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c6500c6b1cd517bfc3eacb1e6147085">&#9670;&nbsp;</a></span>DISPLAY_BRIGHTNESS_MAX_VOLT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DISPLAY_BRIGHTNESS_MAX_VOLT&#160;&#160;&#160;3300</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a31c507ab1a1074ac1ab0a4ce6bbba2f6" name="a31c507ab1a1074ac1ab0a4ce6bbba2f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31c507ab1a1074ac1ab0a4ce6bbba2f6">&#9670;&nbsp;</a></span>LV_TICK_PERIOD_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LV_TICK_PERIOD_MS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3d850a3f56bbe0685b60726d8b53bece" name="a3d850a3f56bbe0685b60726d8b53bece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d850a3f56bbe0685b60726d8b53bece">&#9670;&nbsp;</a></span>Core2ForAWS_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the power chip with default values, enables battery charging, and initializes all enabled hardware features. </p>
<p >At minimum, this helper function initializes the AXP192 power management unit (PMU) with the green LED and vibration motor off, as well as initializing the following features (if enabled):</p><ol type="1">
<li>Display — initializes the SPI bus, also powers the controller and backlight to ~50% brightness.</li>
<li>The touch controller via the FT6336U.</li>
<li>Virtual left, middle, right buttons using the touch controller.</li>
<li>The SK6812 side LED bars.</li>
<li>The 6-axis IMU via the MPU6886.</li>
<li>The real-time clock via the BM8563 features. </li>
</ol>

</div>
</div>
<a id="a0f635870b3574190b1fbc84c6aa24675" name="a0f635870b3574190b1fbc84c6aa24675"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f635870b3574190b1fbc84c6aa24675">&#9670;&nbsp;</a></span>Core2ForAWS_Button_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Button_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the <a class="el" href="core2for_a_w_s_8h.html#a2cd914992d1bec1babd0a7ffba0f554b">button_left</a>, <a class="el" href="core2for_a_w_s_8h.html#a49b277909900db7e85d6be2841301fe7">button_middle</a>, <a class="el" href="core2for_a_w_s_8h.html#ab6cde5989a3afec96cce115746efc606">button_right</a> virtual buttons using the ft6336u touch controller. </p>
<dl class="section note"><dt>Note</dt><dd>The <a class="el" href="core2for_a_w_s_8h.html#a3d850a3f56bbe0685b60726d8b53bece" title="Initializes the power chip with default values, enables battery charging, and initializes all enabled...">Core2ForAWS_Init()</a> calls this function when the hardware feature is enabled. </dd></dl>

</div>
</div>
<a id="a714fd9c7943bbec98c54dfa17d778853" name="a714fd9c7943bbec98c54dfa17d778853"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a714fd9c7943bbec98c54dfa17d778853">&#9670;&nbsp;</a></span>Core2ForAWS_SDcard_Mount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t Core2ForAWS_SDcard_Mount </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mount_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sdmmc_card_t **&#160;</td>
          <td class="paramname"><em>out_card</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes and mounts the SD-Card. </p>
<dl class="section note"><dt>Note</dt><dd>The SD Card must be mounted before use. The SD card and the screen uses the same SPI bus. In order to avoid conflicts with the screen, you must take the spi_mutex semaphore, then call <a class="el" href="disp__spi_8h.html#a3dc6a7525e5a0b34e37a3a64478ec9ee" title="Polls the SPI bus for a pending SPI transaction to complete.">spi_poll()</a> before accessing the SD card. Once done, give/free the semaphore so the display can take it. The display task will then continue to update the display controller on the SPI bus.</dd></dl>
<p>Reading/writing to an inserted SD card can use the standard C functions fopen or fprintf to work with Espressif's virtual file drivers. Visit Espressif's virtual <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/storage/vfs.html">file system component</a> docs for usage.</p>
<p >The example code below, mounts the SD card and then writes a file named <code>hello.txt</code> on the path <code>/sdcard</code> with the contents "Hello &lt;&lt;YOUR SD CARD'S PRODUCT NAME&gt;&gt;!":</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#define MOUNT_POINT &quot;/sdcard&quot;</span></div>
<div class="line">sdmmc_card_t* card;</div>
<div class="line">esp_err_t err;</div>
<div class="line"> </div>
<div class="line">xSemaphoreTake(<a class="code hl_variable" href="disp__spi_8h.html#a76c0525d646735793add25b18043e600">spi_mutex</a>, portMAX_DELAY);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="disp__spi_8h.html#a3dc6a7525e5a0b34e37a3a64478ec9ee">spi_poll</a>();</div>
<div class="line"> </div>
<div class="line">err = Core2ForAWS_Sdcard_Mount(MOUNT_POINT, &amp;card);</div>
<div class="line"> </div>
<div class="line">FILE* f = fopen(MOUNT_POINT<span class="stringliteral">&quot;/hello.txt&quot;</span>, <span class="stringliteral">&quot;w+&quot;</span>)</div>
<div class="line">fprintf(f, &quot;Hello %s!\n&quot;, card-&gt;cid.name);</div>
<div class="line">fclose(f);</div>
<div class="line"> </div>
<div class="line">xSemaphoreGive(<a class="code hl_variable" href="disp__spi_8h.html#a76c0525d646735793add25b18043e600">spi_mutex</a>);</div>
<div class="ttc" id="adisp__spi_8h_html_a3dc6a7525e5a0b34e37a3a64478ec9ee"><div class="ttname"><a href="disp__spi_8h.html#a3dc6a7525e5a0b34e37a3a64478ec9ee">spi_poll</a></div><div class="ttdeci">void spi_poll()</div><div class="ttdoc">Polls the SPI bus for a pending SPI transaction to complete.</div><div class="ttdef"><b>Definition:</b> disp_spi.c:34</div></div>
<div class="ttc" id="adisp__spi_8h_html_a76c0525d646735793add25b18043e600"><div class="ttname"><a href="disp__spi_8h.html#a76c0525d646735793add25b18043e600">spi_mutex</a></div><div class="ttdeci">SemaphoreHandle_t spi_mutex</div><div class="ttdoc">Semaphore for the shared SPI bus.</div><div class="ttdef"><b>Definition:</b> disp_spi.c:21</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mount_path</td><td>The path where partition should be registered. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_card</td><td>The pointer to the card information structure. Hold this handle and use it to unmount the card later if needed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>. 0 or <code>ESP_OK</code> if successful. </dd></dl>

</div>
</div>
<a id="a4c9c5029e08899a3b75a61e22cfa84a7" name="a4c9c5029e08899a3b75a61e22cfa84a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c9c5029e08899a3b75a61e22cfa84a7">&#9670;&nbsp;</a></span>Core2ForAWS_SDcard_Unmount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t Core2ForAWS_SDcard_Unmount </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mount_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sdmmc_card_t *&#160;</td>
          <td class="paramname"><em>out_card</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the FAT partition and unmounts the SD-Card. </p>
<dl class="section note"><dt>Note</dt><dd>The SD Card must be mounted before use. The SD card and the screen uses the same SPI bus. In order to avoid conflicts with the screen, you must take the spi_mutex semaphore, then call <a class="el" href="disp__spi_8h.html#a3dc6a7525e5a0b34e37a3a64478ec9ee" title="Polls the SPI bus for a pending SPI transaction to complete.">spi_poll()</a> before accessing the SD card. Once done, give/free the semaphore so the display can take it. The display task will then continue to update the display controller on the SPI bus.</dd></dl>
<p>To learn more about using the SD card, visit Espressif's virtual <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/storage/vfs.html">file system component</a> docs for usage.</p>
<p >The example code below, mounts the SD card, writes a file named <code>hello.txt</code> on the path <code>/sdcard</code> with the contents "Hello
&lt;&lt;YOUR SD CARD'S PRODUCT NAME&gt;&gt;!", and then unmounts the card:</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#define MOUNT_POINT &quot;/sdcard&quot;</span></div>
<div class="line">sdmmc_card_t* card;</div>
<div class="line">esp_err_t err;</div>
<div class="line"> </div>
<div class="line">xSemaphoreTake(<a class="code hl_variable" href="disp__spi_8h.html#a76c0525d646735793add25b18043e600">spi_mutex</a>, portMAX_DELAY);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="disp__spi_8h.html#a3dc6a7525e5a0b34e37a3a64478ec9ee">spi_poll</a>();</div>
<div class="line"> </div>
<div class="line">err = Core2ForAWS_Sdcard_Mount(MOUNT_POINT, &amp;card);</div>
<div class="line"> </div>
<div class="line">FILE* f = fopen(MOUNT_POINT<span class="stringliteral">&quot;/hello.txt&quot;</span>, <span class="stringliteral">&quot;w+&quot;</span>)</div>
<div class="line">fprintf(f, &quot;Hello %s!\n&quot;, card-&gt;cid.name);</div>
<div class="line">fclose(f);</div>
<div class="line"> </div>
<div class="line">err = Core2ForAWS_Sdcard_Unmount(MOUNT_POINT, &amp;card);</div>
<div class="line">xSemaphoreGive(<a class="code hl_variable" href="disp__spi_8h.html#a76c0525d646735793add25b18043e600">spi_mutex</a>);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mount_path</td><td>The path where partition should be registered. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_card</td><td>The card information structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>. 0 or <code>ESP_OK</code> if successful. </dd></dl>

</div>
</div>
<a id="a1264761696fc1cddfa86421f41654aeb" name="a1264761696fc1cddfa86421f41654aeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1264761696fc1cddfa86421f41654aeb">&#9670;&nbsp;</a></span>Core2ForAWS_Motor_SetStrength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Motor_SetStrength </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>strength</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the speed of the vibration motor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">strength</td><td>The desired speed of the motor or strength of the vibration. 0 to turn it off, 255 for maximum speed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aacc1c4dcaa8c695050dc274e81d6d188" name="aacc1c4dcaa8c695050dc274e81d6d188"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacc1c4dcaa8c695050dc274e81d6d188">&#9670;&nbsp;</a></span>Core2ForAWS_Speaker_Enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Speaker_Enable </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables or disables the NS4168 speaker amplifier. </p>
<dl class="section note"><dt>Note</dt><dd>The speaker cannot be enabled at the same time as the microphone since they both share a common pin (GPIO0). Attempting to enable and use both at the same time will cause the device to hard fault.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>Desired state of the speaker. 1 to enable, 0 to disable. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5b859226349decb4411d11f48595e8f4" name="a5b859226349decb4411d11f48595e8f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b859226349decb4411d11f48595e8f4">&#9670;&nbsp;</a></span>Core2ForAWS_PMU_GetBatVolt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float Core2ForAWS_PMU_GetBatVolt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the battery voltage with the AXP192. </p>
<p ><b>EXAMPLE</b> Get the current battery voltage in the variable named <em>battery_voltage</em> and print the voltage to the serial output.</p>
<div class="fragment"><div class="line"><span class="keywordtype">float</span> battery_voltage = <a class="code hl_function" href="core2for_a_w_s_8c.html#a5b859226349decb4411d11f48595e8f4">Core2ForAWS_PMU_GetBatVolt</a>();</div>
<div class="line">printf(<span class="stringliteral">&quot;Battery Voltage: %0.2f&quot;</span>, battery_voltage);</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a5b859226349decb4411d11f48595e8f4"><div class="ttname"><a href="core2for_a_w_s_8c.html#a5b859226349decb4411d11f48595e8f4">Core2ForAWS_PMU_GetBatVolt</a></div><div class="ttdeci">float Core2ForAWS_PMU_GetBatVolt(void)</div><div class="ttdoc">Gets the battery voltage with the AXP192.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:160</div></div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>The voltage of the battery. </dd></dl>

</div>
</div>
<a id="a20baa893832fff035a0bdef5240fbfc7" name="a20baa893832fff035a0bdef5240fbfc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20baa893832fff035a0bdef5240fbfc7">&#9670;&nbsp;</a></span>Core2ForAWS_PMU_GetBatCurrent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float Core2ForAWS_PMU_GetBatCurrent </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the battery current draw with the AXP192. </p>
<p ><b>EXAMPLE</b> Get the current battery current in the variable named <em>battery_current</em> and print the current to the serial output.</p>
<div class="fragment"><div class="line"><span class="keywordtype">float</span> battery_current = <a class="code hl_function" href="core2for_a_w_s_8c.html#a20baa893832fff035a0bdef5240fbfc7">Core2ForAWS_PMU_GetBatCurrent</a>();</div>
<div class="line">printf(<span class="stringliteral">&quot;Battery Current: %0.3f&quot;</span>, battery_current);</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a20baa893832fff035a0bdef5240fbfc7"><div class="ttname"><a href="core2for_a_w_s_8c.html#a20baa893832fff035a0bdef5240fbfc7">Core2ForAWS_PMU_GetBatCurrent</a></div><div class="ttdeci">float Core2ForAWS_PMU_GetBatCurrent(void)</div><div class="ttdoc">Gets the battery current draw with the AXP192.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:164</div></div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>The current draw of the battery. </dd></dl>

</div>
</div>
<a id="abee63e7a3f7aeea10fb03c7bbe3ea6f4" name="abee63e7a3f7aeea10fb03c7bbe3ea6f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee63e7a3f7aeea10fb03c7bbe3ea6f4">&#9670;&nbsp;</a></span>Core2ForAWS_PMU_SetPowerIn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_PMU_SetPowerIn </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adcdde4ebb075c61f0bfa937009de6c64" name="adcdde4ebb075c61f0bfa937009de6c64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcdde4ebb075c61f0bfa937009de6c64">&#9670;&nbsp;</a></span>Core2ForAWS_PMU_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_PMU_Init </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ldo2_volt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ldo3_volt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dc2_volt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dc3_volt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the AXP192 Power Management Unit (PMU). </p>
<p >Used to directly initialize the AXP192 LDO2, LDO3, DC2, and DC3 pins.</p>
<dl class="section note"><dt>Note</dt><dd>The <a class="el" href="core2for_a_w_s_8h.html#a3d850a3f56bbe0685b60726d8b53bece" title="Initializes the power chip with default values, enables battery charging, and initializes all enabled...">Core2ForAWS_Init()</a> calls this function with parameters to initialize the vibration motor and display backlight. If the ILI9342u display hardware feature is enabled, it sets the brightness to ~55% brightness. The vibration motor is always initialized in the off state.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ldo2_volt</td><td>low-dropout voltage of the display. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ldo3_volt</td><td>low-dropout voltage of the vibration motor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dc2_volt</td><td>voltage of the vibration motor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dc3_volt</td><td>voltage of the display. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab23f5196841f3572d2c7cc52d053f435" name="ab23f5196841f3572d2c7cc52d053f435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab23f5196841f3572d2c7cc52d053f435">&#9670;&nbsp;</a></span>Core2ForAWS_Sk6812_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Sk6812_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the SK6812 LED bars. </p>
<p >You must use this to initialize the LED bars before attempting to use either of the LED bars.</p>
<dl class="section note"><dt>Note</dt><dd>The <a class="el" href="core2for_a_w_s_8h.html#a3d850a3f56bbe0685b60726d8b53bece" title="Initializes the power chip with default values, enables battery charging, and initializes all enabled...">Core2ForAWS_Init()</a> calls this function when the hardware feature is enabled. </dd></dl>

</div>
</div>
<a id="a15558a37529e89394598df0128d721c9" name="a15558a37529e89394598df0128d721c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15558a37529e89394598df0128d721c9">&#9670;&nbsp;</a></span>Core2ForAWS_Sk6812_SetColor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Sk6812_SetColor </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the color of a single LED in the LED bars. </p>
<dl class="section note"><dt>Note</dt><dd>Requires following with <a class="el" href="core2for_a_w_s_8h.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32" title="Updates the LEDs in the LED bars with any new values set using Core2ForAWS_Sk6812_SetColor,...">Core2ForAWS_Sk6812_Show()</a> to write the set color to the LEDs.</dd></dl>
<p><b>Example:</b></p>
<p >Set the color of each of the LEDs to white one at a time every second. </p><div class="fragment"><div class="line"><span class="keywordflow">for</span> (uint8_t i = 0; i &lt; 10; i++) {</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a15558a37529e89394598df0128d721c9">Core2ForAWS_Sk6812_SetColor</a>(i, 0xffffff);</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32">Core2ForAWS_Sk6812_Show</a>();</div>
<div class="line">    vTaskDelay(pdMS_TO_TICKS(1000));</div>
<div class="line">}</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a15558a37529e89394598df0128d721c9"><div class="ttname"><a href="core2for_a_w_s_8c.html#a15558a37529e89394598df0128d721c9">Core2ForAWS_Sk6812_SetColor</a></div><div class="ttdeci">void Core2ForAWS_Sk6812_SetColor(uint16_t pos, uint32_t color)</div><div class="ttdoc">Sets the color of a single LED in the LED bars.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:232</div></div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a54bd0bce86a0ed5ea5ba2ca0c7e9ef32"><div class="ttname"><a href="core2for_a_w_s_8c.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32">Core2ForAWS_Sk6812_Show</a></div><div class="ttdeci">void Core2ForAWS_Sk6812_Show(void)</div><div class="ttdoc">Updates the LEDs in the LED bars with any new values set using Core2ForAWS_Sk6812_SetColor,...</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:252</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pos</td><td>LED to set. Accepts a value from 0 to 9.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">color</td><td>Color of the LED. Accepts hexadecimal (web colors). 0x000000 is black and 0xffffff is white.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>You must use <code><a class="el" href="core2for_a_w_s_8h.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32" title="Updates the LEDs in the LED bars with any new values set using Core2ForAWS_Sk6812_SetColor,...">Core2ForAWS_Sk6812_Show()</a></code> after this function for the setting to take effect. </dd></dl>

</div>
</div>
<a id="a5dde1ef368e54c5c39db6257b0a83e13" name="a5dde1ef368e54c5c39db6257b0a83e13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dde1ef368e54c5c39db6257b0a83e13">&#9670;&nbsp;</a></span>Core2ForAWS_Sk6812_SetSideColor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Sk6812_SetSideColor </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>side</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the color of all the LEDs on one side of the LED bars. </p>
<dl class="section note"><dt>Note</dt><dd>Requires following with <a class="el" href="core2for_a_w_s_8h.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32" title="Updates the LEDs in the LED bars with any new values set using Core2ForAWS_Sk6812_SetColor,...">Core2ForAWS_Sk6812_Show()</a> to write the set color to the LEDs.</dd></dl>
<p><b>Example:</b></p>
<p >Set the left LED bar to green and the right LED bar to red. </p><div class="fragment"><div class="line"><a class="code hl_function" href="core2for_a_w_s_8c.html#a5dde1ef368e54c5c39db6257b0a83e13">Core2ForAWS_Sk6812_SetSideColor</a>(<a class="code hl_define" href="core2for_a_w_s_8h.html#ad401f71468100c2d5d8b882577cf7884">SK6812_SIDE_LEFT</a>, 0x00ff00);</div>
<div class="line"><a class="code hl_function" href="core2for_a_w_s_8c.html#a5dde1ef368e54c5c39db6257b0a83e13">Core2ForAWS_Sk6812_SetSideColor</a>(<a class="code hl_define" href="core2for_a_w_s_8h.html#ab984a626760459f01581809754a67756">SK6812_SIDE_RIGHT</a>, 0xff0000);</div>
<div class="line"><a class="code hl_function" href="core2for_a_w_s_8c.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32">Core2ForAWS_Sk6812_Show</a>();</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a5dde1ef368e54c5c39db6257b0a83e13"><div class="ttname"><a href="core2for_a_w_s_8c.html#a5dde1ef368e54c5c39db6257b0a83e13">Core2ForAWS_Sk6812_SetSideColor</a></div><div class="ttdeci">void Core2ForAWS_Sk6812_SetSideColor(uint8_t side, uint32_t color)</div><div class="ttdoc">Sets the color of all the LEDs on one side of the LED bars.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:236</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_ab984a626760459f01581809754a67756"><div class="ttname"><a href="core2for_a_w_s_8h.html#ab984a626760459f01581809754a67756">SK6812_SIDE_RIGHT</a></div><div class="ttdeci">#define SK6812_SIDE_RIGHT</div><div class="ttdoc">LEDs on right side of the LED bar. For use with Core2ForAWS_Sk6812_SetSideColor().</div><div class="ttdef"><b>Definition:</b> core2forAWS.h:64</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_ad401f71468100c2d5d8b882577cf7884"><div class="ttname"><a href="core2for_a_w_s_8h.html#ad401f71468100c2d5d8b882577cf7884">SK6812_SIDE_LEFT</a></div><div class="ttdeci">#define SK6812_SIDE_LEFT</div><div class="ttdoc">LEDs on left side of the LED bar. For use with Core2ForAWS_Sk6812_SetSideColor().</div><div class="ttdef"><b>Definition:</b> core2forAWS.h:57</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">side</td><td>Side of LEDs to set. Accepts <code>SK6812_SIDE_LEFT</code> or <code>SK6812_SIDE_RIGHT</code>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">color</td><td>Color of LED to set. Accepts hexadecimal (web colors). 0x000000 is black and 0xffffff is white.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>You must use <code><a class="el" href="core2for_a_w_s_8h.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32" title="Updates the LEDs in the LED bars with any new values set using Core2ForAWS_Sk6812_SetColor,...">Core2ForAWS_Sk6812_Show()</a></code> after this function for the setting to take effect. </dd></dl>

</div>
</div>
<a id="a5c6c1bbeda65f03428a3fa780c1d3dc8" name="a5c6c1bbeda65f03428a3fa780c1d3dc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c6c1bbeda65f03428a3fa780c1d3dc8">&#9670;&nbsp;</a></span>Core2ForAWS_Sk6812_SetBrightness()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Sk6812_SetBrightness </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>brightness</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the brightness of the LED bars. </p>
<dl class="section note"><dt>Note</dt><dd>You must use <code><a class="el" href="core2for_a_w_s_8h.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32" title="Updates the LEDs in the LED bars with any new values set using Core2ForAWS_Sk6812_SetColor,...">Core2ForAWS_Sk6812_Show()</a></code> after this function for the setting to take effect.</dd></dl>
<p><b>Example:</b></p>
<p >Set the LEDs to full brightness. </p><div class="fragment"><div class="line"><a class="code hl_function" href="core2for_a_w_s_8c.html#a5c6c1bbeda65f03428a3fa780c1d3dc8">Core2ForAWS_Sk6812_SetBrightness</a>(100);</div>
<div class="line"><a class="code hl_function" href="core2for_a_w_s_8c.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32">Core2ForAWS_Sk6812_Show</a>();</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a5c6c1bbeda65f03428a3fa780c1d3dc8"><div class="ttname"><a href="core2for_a_w_s_8c.html#a5c6c1bbeda65f03428a3fa780c1d3dc8">Core2ForAWS_Sk6812_SetBrightness</a></div><div class="ttdeci">void Core2ForAWS_Sk6812_SetBrightness(uint8_t brightness)</div><div class="ttdoc">Sets the brightness of the LED bars.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:248</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">brightness</td><td>Brightness of the LED bars. 0 is off, 100 is full brightness. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a54bd0bce86a0ed5ea5ba2ca0c7e9ef32" name="a54bd0bce86a0ed5ea5ba2ca0c7e9ef32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32">&#9670;&nbsp;</a></span>Core2ForAWS_Sk6812_Show()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Sk6812_Show </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the LEDs in the LED bars with any new values set using Core2ForAWS_Sk6812_SetColor, Core2ForAWS_Sk6812_SetSideColor or Core2ForAWS_Sk6812_SetBrightness. </p>
<p >This function must be executed after setting LED bar values. This saves execution time by updating LEDs once after making multiple changes instead of updating with every change. </p>

</div>
</div>
<a id="a179990c112d4839cabae1c9e86a7a6b9" name="a179990c112d4839cabae1c9e86a7a6b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a179990c112d4839cabae1c9e86a7a6b9">&#9670;&nbsp;</a></span>Core2ForAWS_Sk6812_Clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Sk6812_Clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turns off the LEDs in the LED bars and removes any set color. </p>
<dl class="section note"><dt>Note</dt><dd>You must use <code><a class="el" href="core2for_a_w_s_8h.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32" title="Updates the LEDs in the LED bars with any new values set using Core2ForAWS_Sk6812_SetColor,...">Core2ForAWS_Sk6812_Show()</a></code> after this function for the setting to take effect.</dd></dl>
<p><b>Example:</b></p>
<p >Set the LEDs to full brightness. </p><div class="fragment"><div class="line"><a class="code hl_function" href="core2for_a_w_s_8c.html#a179990c112d4839cabae1c9e86a7a6b9">Core2ForAWS_Sk6812_Clear</a>();</div>
<div class="line"><a class="code hl_function" href="core2for_a_w_s_8c.html#a54bd0bce86a0ed5ea5ba2ca0c7e9ef32">Core2ForAWS_Sk6812_Show</a>();</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a179990c112d4839cabae1c9e86a7a6b9"><div class="ttname"><a href="core2for_a_w_s_8c.html#a179990c112d4839cabae1c9e86a7a6b9">Core2ForAWS_Sk6812_Clear</a></div><div class="ttdeci">void Core2ForAWS_Sk6812_Clear(void)</div><div class="ttdoc">Turns off the LEDs in the LED bars and removes any set color.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:256</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a5a8fa1e5529ce59892d5176c7249eb2a" name="a5a8fa1e5529ce59892d5176c7249eb2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a8fa1e5529ce59892d5176c7249eb2a">&#9670;&nbsp;</a></span>Core2ForAWS_Display_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Display_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the display. </p>
<p >You must use this to initialize the display before attempting to write to the display. It initializes the ILI9342C on the SPI bus and the LVGL driver.</p>
<dl class="section note"><dt>Note</dt><dd>Creates a FreeRTOS task with the task name <code>gui</code>. </dd>
<dd>
The <a class="el" href="core2for_a_w_s_8h.html#a3d850a3f56bbe0685b60726d8b53bece" title="Initializes the power chip with default values, enables battery charging, and initializes all enabled...">Core2ForAWS_Init()</a> calls this function when the hardware feature is enabled. </dd></dl>

</div>
</div>
<a id="a67a760b89e44e6bd0c96f90cc6aca47d" name="a67a760b89e44e6bd0c96f90cc6aca47d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67a760b89e44e6bd0c96f90cc6aca47d">&#9670;&nbsp;</a></span>Core2ForAWS_Display_SetBrightness()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Display_SetBrightness </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>brightness</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the brightness of the display. </p>
<p >This function sets the brightness of the display using the AXP192 power management unit. It does not write to the display controller, so it does not require taking the xGuiSemaphore mutex prior to use.</p>
<p ><b>Example:</b></p>
<p >Set the display brightness to maximum. </p><div class="fragment"><div class="line"><a class="code hl_function" href="core2for_a_w_s_8c.html#a67a760b89e44e6bd0c96f90cc6aca47d">Core2ForAWS_Display_SetBrightness</a>(100);</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a67a760b89e44e6bd0c96f90cc6aca47d"><div class="ttname"><a href="core2for_a_w_s_8c.html#a67a760b89e44e6bd0c96f90cc6aca47d">Core2ForAWS_Display_SetBrightness</a></div><div class="ttdeci">void Core2ForAWS_Display_SetBrightness(uint8_t brightness)</div><div class="ttdoc">Sets the brightness of the display.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:333</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">brightness</td><td>the desired brightness of the display. Accepts a value from 0 to 100. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6f638e20c3c332cd77a84df3e133f4e7" name="a6f638e20c3c332cd77a84df3e133f4e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f638e20c3c332cd77a84df3e133f4e7">&#9670;&nbsp;</a></span>Core2ForAWS_LED_Enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_LED_Enable </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turns on or off green LED. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">enable</td><td>The desired state of the LED. 1 to turn on, 0 to turn off. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a20b1459685901f232474236d0fc6c23f" name="a20b1459685901f232474236d0fc6c23f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20b1459685901f232474236d0fc6c23f">&#9670;&nbsp;</a></span>Core2ForAWS_Port_PinMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t Core2ForAWS_Port_PinMode </td>
          <td>(</td>
          <td class="paramtype">gpio_num_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4db">pin_mode_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the pin mode of the specified pin. </p>
<p >This function sets the mode of the pin. The available modes are defined by pin_mode_t. All pins support digital input/ouput of high/low. Only specified pins support digital output, I2C, ADC, DAC, or UART. View the <a href="https://www.espressif.com/sites/default/files/documentation/esp32_datasheet_en.pdf">ESP32 datasheet</a> or official ]Espressif GPIO driver documentation](<a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/gpio.html">https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/gpio.html</a>)</p>
<p ><b>INPUT</b> sets the pin to be able to perform a digital read. Enables the internal pullup resistor. Voltage should not exceed 3.3v.</p>
<p ><b>OUTPUT</b> sets the pin to be able to perform a digital write. Outputs 3.3v when the pin set to high. Not available on Port B GPIO 36.</p>
<p ><b>I2C</b> checks to ensure the pin you're planning to use is meant for I2C communications. You must use PORT_A_SDA_PIN (same as GPIO 32) for the I2C data pin and PORT_A_SCL_PIN (same as GPIO 33) for the I2C clock line pin. Peripherals attached to expansion port A will use I2C port number 0 (I2C_NUM_0) as the on-board peripherals are on I2C port number 1 (I2C_NUM_1). The APIs provided utilize the built-in pullup resistors on the SDA and SCL lines with the Core2 for AWS IoT Kit as the I2C controller, and all attached devices as the peripheral.</p>
<p ><b>ADC</b> sets the pin to analog single read mode. Single read mode is suitable for low-frequency sampling operations. Must use PORT_B_ADC_PIN (same as GPIO_NUM_36) since it is the only expansion port pin that is ADC capable.</p>
<p ><b>DAC</b> allows the pin to be set to specified voltages. Must use PORT_B_DAC_PIN (same as GPIO_NUM_26) since it is the only expansion port pin that is DAC capable.</p>
<p ><b>UART</b> enables full-duplex Universal Asynchronous Receiver/ Transmitter (UART) serial communications, utilizing both PORT_C_UART_TX_PIN and PORT_C_UART_RX_PIN for transmiting and receiving data. This function should only be called once for UART since setting one pin to UART will automatically set the other. Must use PORT_C_UART_TX_PIN (same as GPIO_NUM_14) as the UART transmit pin since it is the only expansion port pin that is UART TX capable. Must use PORT_C_UART_RX_PIN (same as GPIO_NUM_13) as the UART receive pin since it is the only expansion port pin that is UART RX capable.</p>
<p ><b>NONE</b> resets the pin and removes frees memory.</p>
<p >The example code below sets the ADC pin (GPIO 36) to ADC mode after initializing the Core2 for AWS IoT Kit and prints out the result of attempting to set the pin.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a> = <span class="stringliteral">&quot;SET_PINMODE_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main(<span class="keywordtype">void</span>){</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line">    esp_err_t err = <a class="code hl_function" href="core2for_a_w_s_8c.html#a20b1459685901f232474236d0fc6c23f">Core2ForAWS_Port_PinMode</a>(GPIO_NUM_36, <a class="code hl_enumvalue" href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dba5ec0e8ce4c96673614190a8852261f4f">ADC</a>);</div>
<div class="line">    ESP_LOGI(<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>, <span class="stringliteral">&quot;Status of setting the pin: %d&quot;</span>, err);</div>
<div class="line">}</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a20b1459685901f232474236d0fc6c23f"><div class="ttname"><a href="core2for_a_w_s_8c.html#a20b1459685901f232474236d0fc6c23f">Core2ForAWS_Port_PinMode</a></div><div class="ttdeci">esp_err_t Core2ForAWS_Port_PinMode(gpio_num_t pin, pin_mode_t mode)</div><div class="ttdoc">Sets the pin mode of the specified pin.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:431</div></div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a3d850a3f56bbe0685b60726d8b53bece"><div class="ttname"><a href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a></div><div class="ttdeci">void Core2ForAWS_Init(void)</div><div class="ttdoc">Initializes the power chip with default values, enables battery charging, and initializes all enabled...</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:32</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html"><div class="ttname"><a href="core2for_a_w_s_8h.html">core2forAWS.h</a></div><div class="ttdoc">Functions to initialize and access Core2 for AWS IoT Kit hardware features.</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_a77fecc1883f27c095012fbe56345c4dba5ec0e8ce4c96673614190a8852261f4f"><div class="ttname"><a href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dba5ec0e8ce4c96673614190a8852261f4f">ADC</a></div><div class="ttdeci">@ ADC</div><div class="ttdoc">Enable ADC mode. Only available on Port B—GPIO 36.</div><div class="ttdef"><b>Definition:</b> core2forAWS.h:218</div></div>
<div class="ttc" id="ai2c__device_8c_html_afc3d101f633a076cc1ca84b85b6224b2"><div class="ttname"><a href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a></div><div class="ttdeci">#define TAG</div><div class="ttdef"><b>Definition:</b> i2c_device.c:10</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pin</td><td>The GPIO pin to set the mode of. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>The mode to set the GPIO pin. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>. 0 or <code>ESP_OK</code> if successful. </dd></dl>

</div>
</div>
<a id="ae40c69633879f4b82c939e2c63814e81" name="ae40c69633879f4b82c939e2c63814e81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae40c69633879f4b82c939e2c63814e81">&#9670;&nbsp;</a></span>Core2ForAWS_Port_Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Core2ForAWS_Port_Read </td>
          <td>(</td>
          <td class="paramtype">gpio_num_t&#160;</td>
          <td class="paramname"><em>pin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the value from a specified digital pin that's set as an input — either 1 (high) or 0 (low). </p>
<dl class="section note"><dt>Note</dt><dd>pin_mode_t for a GPIO pin must be set to INPUT before using Core2ForAWS_Port_Read for that pin. </dd>
<dd>
Reads high when connected to Vcc. </dd>
<dd>
The AXP192 PMU is configured to output 5v on the expansion port's VCC pin. Some peripherals require 3.3V and requires adjusting the output from the AXP192. This is currently unsupported, but can be acheived using the AXP192 driver (located in the <b>core2forAWS/axp192</b> folder) for advanced developers.</dd></dl>
<p>This function reads if the specified pin is high (1) or low (0). In order for the pin to read high, the connected peripheral must use the available ground and Vcc pins and not an external power source.</p>
<p >The example code sets GPIO 26 (same as PORT_B_DAC_PIN) as an input, creates a FreeRTOS task which periodically (1s) reads from GPIO 26 to see if a compatible peripheral is connected. The task prints the returned value to the serial monitor.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/FreeRTOS.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/task.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a> = <span class="stringliteral">&quot;DIGITAL_READ_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> pin_read_task(){</div>
<div class="line">    <span class="keywordflow">for</span>(;;){</div>
<div class="line">        ESP_LOGI(<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>, <span class="stringliteral">&quot;Sensor plugged in (0=no / 1=yes): %d&quot;</span>, <a class="code hl_function" href="core2for_a_w_s_8c.html#ae40c69633879f4b82c939e2c63814e81">Core2ForAWS_Port_Read</a>(GPIO_NUM_26));</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(1000));</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main(<span class="keywordtype">void</span>){</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line">    esp_err_t err = <a class="code hl_function" href="core2for_a_w_s_8c.html#a20b1459685901f232474236d0fc6c23f">Core2ForAWS_Port_PinMode</a>(GPIO_NUM_26, <a class="code hl_enumvalue" href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dbae310c909d76b003d016bef8bdf16936a">INPUT</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (err == ESP_OK){</div>
<div class="line">        xTaskCreatePinnedToCore(pin_read_task, <span class="stringliteral">&quot;read_pin&quot;</span>, 1024*4, NULL, 1, NULL, 1);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_ae40c69633879f4b82c939e2c63814e81"><div class="ttname"><a href="core2for_a_w_s_8c.html#ae40c69633879f4b82c939e2c63814e81">Core2ForAWS_Port_Read</a></div><div class="ttdeci">bool Core2ForAWS_Port_Read(gpio_num_t pin)</div><div class="ttdoc">Reads the value from a specified digital pin that's set as an input — either 1 (high) or 0 (low).</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:502</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_a77fecc1883f27c095012fbe56345c4dbae310c909d76b003d016bef8bdf16936a"><div class="ttname"><a href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dbae310c909d76b003d016bef8bdf16936a">INPUT</a></div><div class="ttdeci">@ INPUT</div><div class="ttdoc">Set GPIO to input mode.</div><div class="ttdef"><b>Definition:</b> core2forAWS.h:215</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pin</td><td>The GPIO pin to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 for high, 0 for low. </dd></dl>

</div>
</div>
<a id="a7e481da2a60b6f0c46d6a4a5b2c8453e" name="a7e481da2a60b6f0c46d6a4a5b2c8453e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e481da2a60b6f0c46d6a4a5b2c8453e">&#9670;&nbsp;</a></span>Core2ForAWS_Port_Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t Core2ForAWS_Port_Write </td>
          <td>(</td>
          <td class="paramtype">gpio_num_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the specified level (0 or 1) to the specified digital pin. </p>
<dl class="section note"><dt>Note</dt><dd>pin_mode_t for a GPIO pin must be set to OUTPUT before using Core2ForAWS_Port_Write for that pin.</dd>
<dd>
The AXP192 PMU is configured to output 5v on the expansion port's VCC pin. Some peripherals require 3.3V and requires adjusting the output from the AXP192. This is currently unsupported, but can be acheived using the AXP192 driver (located in the <b>core2forAWS/axp192</b> folder) for advanced developers.</dd></dl>
<p>This function sets the specified pin to either high(1) or low(0) digital level.</p>
<p >The example code sets the GPIO 26 (same as PORT_B_DAC_PIN) pin mode to OUTPUT, creates a FreeRTOS task which periodically (1s) toggles GPIO 26 pin between high and low and prints the output level to the serial monitor.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/FreeRTOS.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/task.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a> = <span class="stringliteral">&quot;DIGITAL_WRITE_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> pin_write_task(){</div>
<div class="line">    <span class="keywordtype">bool</span> output = 0;</div>
<div class="line">    <span class="keywordflow">for</span>(;;){</div>
<div class="line">        <a class="code hl_function" href="core2for_a_w_s_8c.html#a7e481da2a60b6f0c46d6a4a5b2c8453e">Core2ForAWS_Port_Write</a>(GPIO_NUM_26, output);</div>
<div class="line">        ESP_LOGI(<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>, <span class="stringliteral">&quot;Output on GPIO %d: %s&quot;</span>, GPIO_NUM_26, output ? <span class="stringliteral">&quot;HIGH&quot;</span> : <span class="stringliteral">&quot;LOW&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        output = !output;</div>
<div class="line"> </div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(1000));</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main(<span class="keywordtype">void</span>){</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line">    esp_err_t err = <a class="code hl_function" href="core2for_a_w_s_8c.html#a20b1459685901f232474236d0fc6c23f">Core2ForAWS_Port_PinMode</a>(GPIO_NUM_26, <a class="code hl_enumvalue" href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dba2ab08d3e103968f5f4f26b66a52e99d6">OUTPUT</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (err == ESP_OK){</div>
<div class="line">        xTaskCreatePinnedToCore(pin_write_task, <span class="stringliteral">&quot;write_pin&quot;</span>, 1024*4, NULL, 1, NULL, 1);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a7e481da2a60b6f0c46d6a4a5b2c8453e"><div class="ttname"><a href="core2for_a_w_s_8c.html#a7e481da2a60b6f0c46d6a4a5b2c8453e">Core2ForAWS_Port_Write</a></div><div class="ttdeci">esp_err_t Core2ForAWS_Port_Write(gpio_num_t pin, bool level)</div><div class="ttdoc">Writes the specified level (0 or 1) to the specified digital pin.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:508</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_a77fecc1883f27c095012fbe56345c4dba2ab08d3e103968f5f4f26b66a52e99d6"><div class="ttname"><a href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dba2ab08d3e103968f5f4f26b66a52e99d6">OUTPUT</a></div><div class="ttdeci">@ OUTPUT</div><div class="ttdoc">Set GPIO to output mode.</div><div class="ttdef"><b>Definition:</b> core2forAWS.h:214</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pin</td><td>The GPIO pin to set the digital output level of. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>The digital out level of the pin (low = 0, high = 1). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>. 0 or <code>ESP_OK</code> if successful. </dd></dl>

</div>
</div>
<a id="a3b48f559933447fce3325cf959c07e4f" name="a3b48f559933447fce3325cf959c07e4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b48f559933447fce3325cf959c07e4f">&#9670;&nbsp;</a></span>Core2ForAWS_Port_A_I2C_Begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a> Core2ForAWS_Port_A_I2C_Begin </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>baud</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a peripheral connected to expansion port A. </p>
<p >This function allocates configuration of an attached I2C peripheral on expansion port A with a minimum baud rate of 100,000Hz. The macro <a class="el" href="core2for_a_w_s_8h.html#a8572d2fbbeceb5f6005caa772127bc32">PORT_A_I2C_STANDARD_BAUD</a> can used for a generally compatible baud rate for most peripherals. The maximum rate supported by the ESP32-D0WD is 5MHz.</p>
<p >Read more about <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/i2c.html">I2C capabilities of the ESP32 microcontroller and available APIs in the ESP-IDF</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The AXP192 PMU is configured to output 5v on the expansion port's VCC pin. Some peripherals require 3.3V and requires adjusting the output from the AXP192. This is currently unsupported, but can be acheived using the AXP192 driver (located in the <b>core2forAWS/axp192</b> folder) for advanced developers.</dd></dl>
<p>The example code allocates a I2C heart rate sensor peripheral in the variable port_A_peripheral of type I2CDevice_t that has an 8-bit device address of 0xA0 (right-shifted by 1-bit to be a 7-bit address) and using the standard baud rate. It then waits 10 seconds before looping to read from the peripheral, and since the device doesn't take a register address, it uses the macro <a class="el" href="i2c__device_8h.html#ad3ffe5dc6c86353866b9e81d2d7afbd2">I2C_NO_REG</a>. The reading is printed every 10 seconds to the serial output.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define DEVICE_ADDRESS 0xA0 &gt;&gt; 1</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a> = <span class="stringliteral">&quot;MAIN&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> i2c_test_task(<span class="keywordtype">void</span> * param){</div>
<div class="line">    <a class="code hl_typedef" href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a> port_A_peripheral = <a class="code hl_function" href="core2for_a_w_s_8c.html#a3b48f559933447fce3325cf959c07e4f">Core2ForAWS_Port_A_I2C_Begin</a>(DEVICE_ADDRESS, <a class="code hl_define" href="core2for_a_w_s_8h.html#a8572d2fbbeceb5f6005caa772127bc32">PORT_A_I2C_STANDARD_BAUD</a>);</div>
<div class="line">    </div>
<div class="line">    vTaskDelay(pdMS_TO_TICKS(10000));</div>
<div class="line">    <span class="keywordflow">for</span>(;;){</div>
<div class="line">        uint8_t heart_rate = 255;</div>
<div class="line">        esp_err_t err = <a class="code hl_function" href="core2for_a_w_s_8c.html#a8ca28405ee964ae83568a6b483d5a11d">Core2ForAWS_Port_A_I2C_Read</a>(port_A_peripheral, <a class="code hl_define" href="i2c__device_8h.html#ad3ffe5dc6c86353866b9e81d2d7afbd2">I2C_NO_REG</a>, &amp;heart_rate, 1);</div>
<div class="line">        <span class="keywordflow">if</span>(!err){</div>
<div class="line">            ESP_LOGI(<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>, <span class="stringliteral">&quot;Heart Rate — %ubpm&quot;</span>, heart_rate);    </div>
<div class="line">        }</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(10000));</div>
<div class="line">    }</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a057922ede225141694594f4adda7df7b">Core2ForAWS_Port_A_I2C_Close</a>(port_A_peripheral);</div>
<div class="line">    vTaskDelete(NULL);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line">    xTaskCreatePinnedToCore(&amp;i2c_test_task, <span class="stringliteral">&quot;i2c_test_task&quot;</span>, 4096, NULL, 5, NULL, 1);</div>
<div class="line">}</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a057922ede225141694594f4adda7df7b"><div class="ttname"><a href="core2for_a_w_s_8c.html#a057922ede225141694594f4adda7df7b">Core2ForAWS_Port_A_I2C_Close</a></div><div class="ttdeci">void Core2ForAWS_Port_A_I2C_Close(I2CDevice_t device)</div><div class="ttdoc">Frees the configuration pointer to the I2C peripheral connected on port A.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:530</div></div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a3b48f559933447fce3325cf959c07e4f"><div class="ttname"><a href="core2for_a_w_s_8c.html#a3b48f559933447fce3325cf959c07e4f">Core2ForAWS_Port_A_I2C_Begin</a></div><div class="ttdeci">I2CDevice_t Core2ForAWS_Port_A_I2C_Begin(uint8_t device_address, uint32_t baud)</div><div class="ttdoc">Allocates a peripheral connected to expansion port A.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:518</div></div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a8ca28405ee964ae83568a6b483d5a11d"><div class="ttname"><a href="core2for_a_w_s_8c.html#a8ca28405ee964ae83568a6b483d5a11d">Core2ForAWS_Port_A_I2C_Read</a></div><div class="ttdeci">esp_err_t Core2ForAWS_Port_A_I2C_Read(I2CDevice_t device, uint32_t register_address, uint8_t *data, uint16_t length)</div><div class="ttdoc">Reads from I2C peripheral connected to expansion port A.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:522</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_a8572d2fbbeceb5f6005caa772127bc32"><div class="ttname"><a href="core2for_a_w_s_8h.html#a8572d2fbbeceb5f6005caa772127bc32">PORT_A_I2C_STANDARD_BAUD</a></div><div class="ttdeci">#define PORT_A_I2C_STANDARD_BAUD</div><div class="ttdoc">The standard baud rate for I2C peripherals connected to Port A.</div><div class="ttdef"><b>Definition:</b> core2forAWS.h:191</div></div>
<div class="ttc" id="ai2c__device_8h_html_a544e7981e2ae57ea1a0dfd91ba69845c"><div class="ttname"><a href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a></div><div class="ttdeci">void * I2CDevice_t</div><div class="ttdoc">A pointer to the I2C peripheral configuration.</div><div class="ttdef"><b>Definition:</b> i2c_device.h:41</div></div>
<div class="ttc" id="ai2c__device_8h_html_ad3ffe5dc6c86353866b9e81d2d7afbd2"><div class="ttname"><a href="i2c__device_8h.html#ad3ffe5dc6c86353866b9e81d2d7afbd2">I2C_NO_REG</a></div><div class="ttdeci">#define I2C_NO_REG</div><div class="ttdoc">Used when the I2C peripheral does not use registers for read/write operations.</div><div class="ttdef"><b>Definition:</b> i2c_device.h:24</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">device_address</td><td>The 7-bit I2C device address. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">baud</td><td>The baud rate of I2C communications. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the I2C device configuration. </dd></dl>

</div>
</div>
<a id="a8ca28405ee964ae83568a6b483d5a11d" name="a8ca28405ee964ae83568a6b483d5a11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ca28405ee964ae83568a6b483d5a11d">&#9670;&nbsp;</a></span>Core2ForAWS_Port_A_I2C_Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t Core2ForAWS_Port_A_I2C_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a>&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>register_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads from I2C peripheral connected to expansion port A. </p>
<p >This function reads a specified number of bytes starting from the specified register on the peripheral.</p>
<dl class="section note"><dt>Note</dt><dd>Some peripherals do not support specifying a register address to read from. In this scenario, input the <a class="el" href="i2c__device_8h.html#ad3ffe5dc6c86353866b9e81d2d7afbd2">I2C_NO_REG</a> macro as the register_address.</dd></dl>
<p>Read more about <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/i2c.html">I2C capabilities of the ESP32 microcontroller and available APIs in the ESP-IDF</a>.</p>
<p >The example code allocates a I2C heart rate sensor peripheral called port_A_peripheral of type I2CDevice_t that has an 8-bit device address of 0xA0 (right-shifted by 1-bit to be a 7-bit address) and using the standard baud rate. It then waits 10 seconds before looping to read from the peripheral, and since the device doesn't take a register address, it uses the macro <a class="el" href="i2c__device_8h.html#ad3ffe5dc6c86353866b9e81d2d7afbd2">I2C_NO_REG</a>. The reading is printed every 10 seconds to the serial output.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define DEVICE_ADDRESS 0xA0 &gt;&gt; 1</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a> = <span class="stringliteral">&quot;MAIN&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> i2c_test_task(<span class="keywordtype">void</span> * param){</div>
<div class="line">    <a class="code hl_typedef" href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a> port_A_peripheral = <a class="code hl_function" href="core2for_a_w_s_8c.html#a3b48f559933447fce3325cf959c07e4f">Core2ForAWS_Port_A_I2C_Begin</a>(DEVICE_ADDRESS, <a class="code hl_define" href="core2for_a_w_s_8h.html#a8572d2fbbeceb5f6005caa772127bc32">PORT_A_I2C_STANDARD_BAUD</a>);</div>
<div class="line">    </div>
<div class="line">    vTaskDelay(pdMS_TO_TICKS(10000));</div>
<div class="line">    <span class="keywordflow">for</span>(;;){</div>
<div class="line">        uint8_t heart_rate = 255;</div>
<div class="line">        esp_err_t err = <a class="code hl_function" href="core2for_a_w_s_8c.html#a8ca28405ee964ae83568a6b483d5a11d">Core2ForAWS_Port_A_I2C_Read</a>(port_A_peripheral, <a class="code hl_define" href="i2c__device_8h.html#ad3ffe5dc6c86353866b9e81d2d7afbd2">I2C_NO_REG</a>, &amp;heart_rate, 1);</div>
<div class="line">        <span class="keywordflow">if</span>(!err){</div>
<div class="line">            ESP_LOGI(<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>, <span class="stringliteral">&quot;Heart Rate — %ubpm&quot;</span>, heart_rate);    </div>
<div class="line">        }</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(10000));</div>
<div class="line">    }</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a057922ede225141694594f4adda7df7b">Core2ForAWS_Port_A_I2C_Close</a>(port_A_peripheral);</div>
<div class="line">    vTaskDelete(NULL);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line">    xTaskCreatePinnedToCore(&amp;i2c_test_task, <span class="stringliteral">&quot;i2c_test_task&quot;</span>, 4096, NULL, 5, NULL, 1);</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">device</td><td>The device configuration pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">register_address</td><td>The address of the register to begin reading from. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>The data read from the register(s). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>The number of bytes to read from the peripheral. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The I2C device configuration. </dd></dl>

</div>
</div>
<a id="ab925bc40cacc623fa6ac2d74ed4d822c" name="ab925bc40cacc623fa6ac2d74ed4d822c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab925bc40cacc623fa6ac2d74ed4d822c">&#9670;&nbsp;</a></span>Core2ForAWS_Port_A_I2C_Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t Core2ForAWS_Port_A_I2C_Write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a>&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>register_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes to I2C peripheral connected to expansion port A. </p>
<p >This function writes a specified number of bytes starting from the specified register on the peripheral.</p>
<dl class="section note"><dt>Note</dt><dd>Some peripherals do not support specifying a register address to write to. In this scenario, input the <a class="el" href="i2c__device_8h.html#ad3ffe5dc6c86353866b9e81d2d7afbd2">I2C_NO_REG</a> macro as the register_address.</dd></dl>
<p>Read more about <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/i2c.html">I2C capabilities of the ESP32 microcontroller and available APIs in the ESP-IDF</a>.</p>
<p >The example code allocates an I2C peripheral called port_A_peripheral of type I2CDevice_t that has a 7-bit device address of 0x68 and uses the standard baud rate. It then writes a single byte of data to a specific register on the device, with a message printed to the serial output if successful.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define DEVICE_ADDRESS 0x68</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a> = <span class="stringliteral">&quot;MAIN&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line">    <a class="code hl_typedef" href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a> port_A_peripheral = <a class="code hl_function" href="core2for_a_w_s_8c.html#a3b48f559933447fce3325cf959c07e4f">Core2ForAWS_Port_A_I2C_Begin</a>(DEVICE_ADDRESS, <a class="code hl_define" href="core2for_a_w_s_8h.html#a8572d2fbbeceb5f6005caa772127bc32">PORT_A_I2C_STANDARD_BAUD</a>);</div>
<div class="line"> </div>
<div class="line">    uint8_t my_data = 23;</div>
<div class="line">    esp_err_t err = <a class="code hl_function" href="core2for_a_w_s_8c.html#a8ca28405ee964ae83568a6b483d5a11d">Core2ForAWS_Port_A_I2C_Read</a>(port_A_peripheral, 0x30, &amp;my_data, 1);</div>
<div class="line">    <span class="keywordflow">if</span>(!err){</div>
<div class="line">        ESP_LOGI(<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>, <span class="stringliteral">&quot;Successfully wrote to the I2C peripheral&quot;</span>);    </div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">device</td><td>The device configuration pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">register_address</td><td>The address of the register to begin reading to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>The data to write to the register(s). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>The number of bytes to write to the peripheral. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The I2C device configuration. </dd></dl>

</div>
</div>
<a id="a057922ede225141694594f4adda7df7b" name="a057922ede225141694594f4adda7df7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a057922ede225141694594f4adda7df7b">&#9670;&nbsp;</a></span>Core2ForAWS_Port_A_I2C_Close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Core2ForAWS_Port_A_I2C_Close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a>&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the configuration pointer to the I2C peripheral connected on port A. </p>
<p >This function frees the allocated memory for the pointer that holds the configuration for the I2C device connected on expansion port A. I2C can have multiple peripherals connected on the same bus, using this function to close/free one will not impact the others.</p>
<p >Read more about <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/i2c.html">I2C capabilities of the ESP32 microcontroller and available APIs in the ESP-IDF</a>.</p>
<p >The example code allocates a I2C peripheral called port_A_peripheral of type I2CDevice_t at the standard baud rate. It then closes/frees that device configuration.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define DEVICE_ADDRESS 0xA0 &gt;&gt; 1</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a> = <span class="stringliteral">&quot;MAIN&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="i2c__device_8h.html#a544e7981e2ae57ea1a0dfd91ba69845c">I2CDevice_t</a> port_A_peripheral = <a class="code hl_function" href="core2for_a_w_s_8c.html#a3b48f559933447fce3325cf959c07e4f">Core2ForAWS_Port_A_I2C_Begin</a>(DEVICE_ADDRESS, <a class="code hl_define" href="core2for_a_w_s_8h.html#a8572d2fbbeceb5f6005caa772127bc32">PORT_A_I2C_STANDARD_BAUD</a>);</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a057922ede225141694594f4adda7df7b">Core2ForAWS_Port_A_I2C_Close</a>(port_A_peripheral);</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">device</td><td>The device configuration pointer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a08ed8dbebc74ab97512f434eeef4c77c" name="a08ed8dbebc74ab97512f434eeef4c77c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08ed8dbebc74ab97512f434eeef4c77c">&#9670;&nbsp;</a></span>Core2ForAWS_Port_B_ADC_ReadRaw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Core2ForAWS_Port_B_ADC_ReadRaw </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the raw ADC value from GPIO36. </p>
<dl class="section note"><dt>Note</dt><dd>Uses the etched eFuse VRef calibration. </dd>
<dd>
pin_mode_t for PORT_B_ADC_PIN must be set to ADC before using Core2ForAWS_Port_B_ADC_ReadRaw.</dd></dl>
<p>This function reads the raw ADC value from Port B's Analog-to-Digital-Converter (ADC) on GPIO36. GPIO36 is the only pin on the external ports with access to the ADC. Read more about using <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/adc.html">ADCs with the ESP-IDF</a>.</p>
<p >The example code sets the ADC pin mode for the PORT_B_ADC_PIN, creates a FreeRTOS task which periodically (1s) reads the raw ADC value of the <a href="https://shop.m5stack.com/products/earth-sensor-unit">M5Stack EARTH</a> moisture sensor connected on Port B. It prints out the value to the serial output.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor"> #include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor"> #include &quot;freertos/FreeRTOS.h&quot;</span></div>
<div class="line"><span class="preprocessor"> #include &quot;freertos/task.h&quot;</span></div>
<div class="line"><span class="preprocessor"> #include &quot;esp_log.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"> #include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a> = <span class="stringliteral">&quot;RAW_ADC_READ_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">void</span> read_moisture_task(){</div>
<div class="line">     <span class="keywordflow">for</span>(;;){</div>
<div class="line">         ESP_LOGI(<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>, <span class="stringliteral">&quot;Moisture ADC raw: %d&quot;</span>, <a class="code hl_function" href="core2for_a_w_s_8c.html#a08ed8dbebc74ab97512f434eeef4c77c">Core2ForAWS_Port_B_ADC_ReadRaw</a>()); *</div>
<div class="line">         vTaskDelay(pdMS_TO_TICKS(1000));</div>
<div class="line">     }</div>
<div class="line"> }</div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">void</span> app_main(<span class="keywordtype">void</span>){</div>
<div class="line">     <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line">     esp_err_t err = <a class="code hl_function" href="core2for_a_w_s_8c.html#a20b1459685901f232474236d0fc6c23f">Core2ForAWS_Port_PinMode</a>(<a class="code hl_define" href="core2for_a_w_s_8h.html#acc191b4d5b52786c63d4692d6cb80d40">PORT_B_ADC_PIN</a>, <a class="code hl_enumvalue" href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dba5ec0e8ce4c96673614190a8852261f4f">ADC</a>);</div>
<div class="line">     <span class="keywordflow">if</span>(err == ESP_OK){</div>
<div class="line">         xTaskCreatePinnedToCore(read_moisture_task, <span class="stringliteral">&quot;moisture_raw&quot;</span>, 4096*2, NULL, 1, NULL, 1);</div>
<div class="line">     }</div>
<div class="line"> }</div>
<div class="line"> </div>
<div class="line">@<span class="keywordflow">return</span> The raw <a class="code hl_enumvalue" href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dba5ec0e8ce4c96673614190a8852261f4f">ADC</a> reading.</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a08ed8dbebc74ab97512f434eeef4c77c"><div class="ttname"><a href="core2for_a_w_s_8c.html#a08ed8dbebc74ab97512f434eeef4c77c">Core2ForAWS_Port_B_ADC_ReadRaw</a></div><div class="ttdeci">uint32_t Core2ForAWS_Port_B_ADC_ReadRaw(void)</div><div class="ttdoc">Read the raw ADC value from GPIO36.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:534</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_acc191b4d5b52786c63d4692d6cb80d40"><div class="ttname"><a href="core2for_a_w_s_8h.html#acc191b4d5b52786c63d4692d6cb80d40">PORT_B_ADC_PIN</a></div><div class="ttdeci">#define PORT_B_ADC_PIN</div><div class="ttdoc">The ADC pin on expansion port B.</div><div class="ttdef"><b>Definition:</b> core2forAWS.h:137</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a297b6764c8ca7a522a15d7384756c285" name="a297b6764c8ca7a522a15d7384756c285"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a297b6764c8ca7a522a15d7384756c285">&#9670;&nbsp;</a></span>Core2ForAWS_Port_B_ADC_ReadMilliVolts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Core2ForAWS_Port_B_ADC_ReadMilliVolts </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the calibrated ADC voltage from GPIO36. </p>
<dl class="section note"><dt>Note</dt><dd>Uses the etched eFuse VRef calibration. </dd>
<dd>
pin_mode_t for PORT_B_ADC_PIN must be set to ADC before using Core2ForAWS_Port_B_ADC_ReadMilliVolts.</dd></dl>
<p>This function reads the raw ADC value from Port B's Analog-to-Digital-Converter (ADC) on GPIO36 and converts it to millivolts using the VRef calibration. GPIO36 is the only pin on the external ports with access to the ADC. Read more about using <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/adc.html">ADCs with the ESP-IDF</a>.</p>
<p >The example code sets the ADC pin mode for the PORT_B_ADC_PIN, creates a FreeRTOS task which periodically (1s) reads the ADC voltage of the <a href="https://shop.m5stack.com/products/earth-sensor-unit">M5Stack EARTH</a> moisture sensor connected on Port B. It prints out the value to the serial output.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/FreeRTOS.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/task.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a> = <span class="stringliteral">&quot;ADC_VOLTAGE_READ_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> read_moisture_task(){</div>
<div class="line">    <span class="keywordflow">for</span>(;;){</div>
<div class="line">        ESP_LOGI(<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>, <span class="stringliteral">&quot;Moisture ADC converted to voltage: %d&quot;</span>, <a class="code hl_function" href="core2for_a_w_s_8c.html#a297b6764c8ca7a522a15d7384756c285">Core2ForAWS_Port_B_ADC_ReadMilliVolts</a>());</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(1000));</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main(<span class="keywordtype">void</span>){</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line">    esp_err_t err = <a class="code hl_function" href="core2for_a_w_s_8c.html#a20b1459685901f232474236d0fc6c23f">Core2ForAWS_Port_PinMode</a>(<a class="code hl_define" href="core2for_a_w_s_8h.html#acc191b4d5b52786c63d4692d6cb80d40">PORT_B_ADC_PIN</a>, <a class="code hl_enumvalue" href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dba5ec0e8ce4c96673614190a8852261f4f">ADC</a>);</div>
<div class="line">    <span class="keywordflow">if</span>(err == ESP_OK){</div>
<div class="line">        xTaskCreatePinnedToCore(read_moisture_task, <span class="stringliteral">&quot;moisture_voltage&quot;</span>, 1024*4, NULL, 1, NULL, 1);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a297b6764c8ca7a522a15d7384756c285"><div class="ttname"><a href="core2for_a_w_s_8c.html#a297b6764c8ca7a522a15d7384756c285">Core2ForAWS_Port_B_ADC_ReadMilliVolts</a></div><div class="ttdeci">uint32_t Core2ForAWS_Port_B_ADC_ReadMilliVolts(void)</div><div class="ttdoc">Read the calibrated ADC voltage from GPIO36.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:538</div></div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>the voltage reading from the ADC in millivolts. </dd></dl>

</div>
</div>
<a id="af441b13016b08aa5781a6096c758f8eb" name="af441b13016b08aa5781a6096c758f8eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af441b13016b08aa5781a6096c758f8eb">&#9670;&nbsp;</a></span>Core2ForAWS_Port_B_DAC_WriteMilliVolts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t Core2ForAWS_Port_B_DAC_WriteMilliVolts </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>mvolts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Outputs the specified voltage (millivolts) to the DAC. </p>
<dl class="section note"><dt>Note</dt><dd>pin_mode_t for PORT_B_DAC_PIN must be set to DAC before using Core2ForAWS_Port_B_DAC_WriteMilliVolts.</dd></dl>
<p>This function accepts a range from 0 to a maximum of VDD3P3_RTC (~3300mV).</p>
<p >The example code sets the PORT_B_DAC_PIN (GPIO 26) pin mode to DAC and outputs 1,500mV.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/FreeRTOS.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/task.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main(<span class="keywordtype">void</span>){</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a20b1459685901f232474236d0fc6c23f">Core2ForAWS_Port_PinMode</a>(<a class="code hl_define" href="core2for_a_w_s_8h.html#ac708091286fa469920c756366ca4e683">PORT_B_DAC_PIN</a>, <a class="code hl_enumvalue" href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dba1bdc96b7f14d9f3d2551d0eee290ef43">DAC</a>);</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#af441b13016b08aa5781a6096c758f8eb">Core2ForAWS_Port_B_DAC_WriteMilliVolts</a>(1500);</div>
<div class="line">}</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_af441b13016b08aa5781a6096c758f8eb"><div class="ttname"><a href="core2for_a_w_s_8c.html#af441b13016b08aa5781a6096c758f8eb">Core2ForAWS_Port_B_DAC_WriteMilliVolts</a></div><div class="ttdeci">esp_err_t Core2ForAWS_Port_B_DAC_WriteMilliVolts(uint16_t mvolts)</div><div class="ttdoc">Outputs the specified voltage (millivolts) to the DAC.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:544</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_a77fecc1883f27c095012fbe56345c4dba1bdc96b7f14d9f3d2551d0eee290ef43"><div class="ttname"><a href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dba1bdc96b7f14d9f3d2551d0eee290ef43">DAC</a></div><div class="ttdeci">@ DAC</div><div class="ttdoc">Enable DAC mode. Only available on Port B—GPIO 26.</div><div class="ttdef"><b>Definition:</b> core2forAWS.h:219</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_ac708091286fa469920c756366ca4e683"><div class="ttname"><a href="core2for_a_w_s_8h.html#ac708091286fa469920c756366ca4e683">PORT_B_DAC_PIN</a></div><div class="ttdeci">#define PORT_B_DAC_PIN</div><div class="ttdoc">The DAC pin on expansion port B.</div><div class="ttdef"><b>Definition:</b> core2forAWS.h:148</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mvolts</td><td>The voltage level to set the DAC pin in millivolts. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>. 0 or <code>ESP_OK</code> if successful. </dd></dl>

</div>
</div>
<a id="a41a0d4cfbf16f792180d7ca55e664095" name="a41a0d4cfbf16f792180d7ca55e664095"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41a0d4cfbf16f792180d7ca55e664095">&#9670;&nbsp;</a></span>Core2ForAWS_Port_C_UART_Begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t Core2ForAWS_Port_C_UART_Begin </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>baud</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the UART interface at the specified baud rate. </p>
<p >This is a helper function to simplify building applications with UART. It preconfigures the UART communications with word length of 8 bits, no parity bit, 1 bit for the number of stop bits, and hardware flow control disabled. It sets the baud rate to the user defined value and starts reading from the UART channel 2 and storing data into the ring buffer of length UART_RX_BUF_SIZE.</p>
<p >Usage of the UART convenience methods provided in this BSP aims to simplify development at the expense of compatibility and performance. The configuration above may not be suitable for your application or attached peripheral. For more information about UART communications on the Core2 for AWS IoT Kit using the ESP32 and how to create your own configuration, visit Espressif's official <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/uart.html">documentation</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The ESP32 is a 3.3v device and requires 3.3v on the UART TX/RX lines. Higher voltages requires the use of a level shifter.</dd></dl>
<p>The example below sets the PORT_C_UART_TX_PIN (GPIO 14) pin mode to UART transmit, which will also set PORT_C_UART_RX_PIN (GPIO 13) to UART receiver, and sets the UART baud rate to 115200. It then starts two FreeRTOS tasks — one that transmits "Hello from AWS IoT
Kit" every two seconds and the other receives the message. The receiver task outputs the number of bytes read from the buffer, the number of bytes that remains unread in the ring buffer, and the message.</p>
<p >To receive the messages transmitted on the same device, run a female-female jumper wire from Port C's TX pin to PORT C's RX pin.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;freertos/FreeRTOS.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/task.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;driver/uart.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;driver/gpio.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a> = <span class="stringliteral">&quot;UART_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_tx_task(<span class="keywordtype">void</span> *arg){</div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *message = <span class="stringliteral">&quot;Hello from AWS IoT Kit&quot;</span>;</div>
<div class="line">        <span class="keywordtype">size_t</span> message_len = strlen(message) + 1;</div>
<div class="line">        <a class="code hl_function" href="core2for_a_w_s_8c.html#aa205e433ced4fdae489d8165883c2f76">Core2ForAWS_Port_C_UART_Send</a>(message, message_len);</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(2000));</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_rx_task(<span class="keywordtype">void</span> *arg){</div>
<div class="line">    <span class="keywordtype">int</span> rxBytes;</div>
<div class="line">    uint8_t *data = heap_caps_malloc(<a class="code hl_define" href="core2for_a_w_s_8h.html#a1f25fe45d891de244a8135ae02fc9265">UART_RX_BUF_SIZE</a>, MALLOC_CAP_SPIRAM); <span class="comment">// Allocate space for message in external RAM</span></div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        rxBytes = <a class="code hl_function" href="core2for_a_w_s_8c.html#a8b09041a7dedd7ae8cb776382478d191">Core2ForAWS_Port_C_UART_Receive</a>(data);</div>
<div class="line">        <span class="keywordflow">if</span> (rxBytes &gt; 0) {</div>
<div class="line">            ESP_LOGI(<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>, <span class="stringliteral">&quot;Read %d bytes from UART. Received: &#39;%s&#39;&quot;</span>, rxBytes, data);</div>
<div class="line">        }</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(100)); <span class="comment">// Read more frequently than transmit to ensure the messages are not erased from buffer.</span></div>
<div class="line">    }</div>
<div class="line">    free(data); <span class="comment">// Free memory from external RAM</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main(<span class="keywordtype">void</span>){</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line">    esp_err_t err = <a class="code hl_function" href="core2for_a_w_s_8c.html#a20b1459685901f232474236d0fc6c23f">Core2ForAWS_Port_PinMode</a>(<a class="code hl_define" href="core2for_a_w_s_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a>, <a class="code hl_enumvalue" href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dbab81270ba54ae4586a18415e5a579633d">UART</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (err == ESP_OK){</div>
<div class="line">        <a class="code hl_function" href="core2for_a_w_s_8c.html#a41a0d4cfbf16f792180d7ca55e664095">Core2ForAWS_Port_C_UART_Begin</a>(115200);</div>
<div class="line">        xTaskCreate(uart_rx_task, <span class="stringliteral">&quot;uart_rx&quot;</span>, 1024*2, NULL, configMAX_PRIORITIES, NULL);</div>
<div class="line">        xTaskCreate(uart_tx_task, <span class="stringliteral">&quot;uart_tx&quot;</span>, 1024*2, NULL, configMAX_PRIORITIES-1, NULL);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a41a0d4cfbf16f792180d7ca55e664095"><div class="ttname"><a href="core2for_a_w_s_8c.html#a41a0d4cfbf16f792180d7ca55e664095">Core2ForAWS_Port_C_UART_Begin</a></div><div class="ttdeci">esp_err_t Core2ForAWS_Port_C_UART_Begin(uint32_t baud)</div><div class="ttdoc">Configures the UART interface at the specified baud rate.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:549</div></div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a8b09041a7dedd7ae8cb776382478d191"><div class="ttname"><a href="core2for_a_w_s_8c.html#a8b09041a7dedd7ae8cb776382478d191">Core2ForAWS_Port_C_UART_Receive</a></div><div class="ttdeci">int Core2ForAWS_Port_C_UART_Receive(uint8_t *message_buffer)</div><div class="ttdoc">Reads messages in the UART2 receiver ring buffer.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:572</div></div>
<div class="ttc" id="acore2for_a_w_s_8c_html_aa205e433ced4fdae489d8165883c2f76"><div class="ttname"><a href="core2for_a_w_s_8c.html#aa205e433ced4fdae489d8165883c2f76">Core2ForAWS_Port_C_UART_Send</a></div><div class="ttdeci">int Core2ForAWS_Port_C_UART_Send(const char *message, size_t len)</div><div class="ttdoc">Sends a specified length of a user defined message over UART2.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:568</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_a1f25fe45d891de244a8135ae02fc9265"><div class="ttname"><a href="core2for_a_w_s_8h.html#a1f25fe45d891de244a8135ae02fc9265">UART_RX_BUF_SIZE</a></div><div class="ttdeci">#define UART_RX_BUF_SIZE</div><div class="ttdoc">The default UART RX ring buffer size.</div><div class="ttdef"><b>Definition:</b> core2forAWS.h:202</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_a77fecc1883f27c095012fbe56345c4dbab81270ba54ae4586a18415e5a579633d"><div class="ttname"><a href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dbab81270ba54ae4586a18415e5a579633d">UART</a></div><div class="ttdeci">@ UART</div><div class="ttdoc">Enable UART RX/TX mode. UART TX only available on Port C—GPIO 14 and UART RX is only available on Por...</div><div class="ttdef"><b>Definition:</b> core2forAWS.h:220</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_a8764a8d2c486f2d66f86d995653cc833"><div class="ttname"><a href="core2for_a_w_s_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a></div><div class="ttdeci">#define PORT_C_UART_TX_PIN</div><div class="ttdoc">The UART transmission pin on expansion port C.</div><div class="ttdef"><b>Definition:</b> core2forAWS.h:159</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">baud</td><td>The baud rate (bits per second) of the UART2 channel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/system/esp_err.html#macros">esp_err_t</a>. 0 or <code>ESP_OK</code> if successful. </dd></dl>

</div>
</div>
<a id="aa205e433ced4fdae489d8165883c2f76" name="aa205e433ced4fdae489d8165883c2f76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa205e433ced4fdae489d8165883c2f76">&#9670;&nbsp;</a></span>Core2ForAWS_Port_C_UART_Send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Core2ForAWS_Port_C_UART_Send </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a specified length of a user defined message over UART2. </p>
<p >This is a helper function to simplify transmitting data over UART using the UART channel 2. This function does not return until all bytes are either transferred from the ring buffer to the hardware FIFO buffer, or already sent.</p>
<p >For more information about UART communications on the Core2 for AWS IoT Kit using the ESP32, visit Espressif's official <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/uart.html">documentation</a>.</p>
<p >The example below sets the PORT_C_UART_TX_PIN (GPIO 14) pin mode to UART transmit, which will also set PORT_C_UART_RX_PIN (GPIO 13) to UART receiver, and sets the UART baud rate to 115200. It then starts two FreeRTOS tasks — one that transmits "Hello from AWS IoT
Kit" every two seconds and the other receives the message. The receiver task outputs the number of bytes read from the buffer, the number of bytes that remains unread in the ring buffer, and the message.</p>
<p >To receive the messages transmitted on the same device, run a female-female jumper wire from Port C's TX pin to PORT C's RX pin.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;freertos/FreeRTOS.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/task.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;driver/uart.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;driver/gpio.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a> = <span class="stringliteral">&quot;UART_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_tx_task(<span class="keywordtype">void</span> *arg){</div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *message = <span class="stringliteral">&quot;Hello from AWS IoT Kit&quot;</span>;</div>
<div class="line">        <span class="keywordtype">size_t</span> message_len = strlen(message) + 1;</div>
<div class="line">        <a class="code hl_function" href="core2for_a_w_s_8c.html#aa205e433ced4fdae489d8165883c2f76">Core2ForAWS_Port_C_UART_Send</a>(message, message_len);</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(2000));</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_rx_task(<span class="keywordtype">void</span> *arg){</div>
<div class="line">    <span class="keywordtype">int</span> rxBytes;</div>
<div class="line">    uint8_t *data = heap_caps_malloc(<a class="code hl_define" href="core2for_a_w_s_8h.html#a1f25fe45d891de244a8135ae02fc9265">UART_RX_BUF_SIZE</a>, MALLOC_CAP_SPIRAM); <span class="comment">// Allocate space for message in external RAM</span></div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        rxBytes = <a class="code hl_function" href="core2for_a_w_s_8c.html#a8b09041a7dedd7ae8cb776382478d191">Core2ForAWS_Port_C_UART_Receive</a>(data);</div>
<div class="line">        <span class="keywordflow">if</span> (rxBytes &gt; 0) {</div>
<div class="line">            ESP_LOGI(<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>, <span class="stringliteral">&quot;Read %d bytes from UART. Received: &#39;%s&#39;&quot;</span>, rxBytes, data);</div>
<div class="line">        }</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(100)); <span class="comment">// Read more frequently than transmit to ensure the messages are not erased from buffer.</span></div>
<div class="line">    }</div>
<div class="line">    free(data); <span class="comment">// Free memory from external RAM</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main(<span class="keywordtype">void</span>){</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line">    esp_err_t err = <a class="code hl_function" href="core2for_a_w_s_8c.html#a20b1459685901f232474236d0fc6c23f">Core2ForAWS_Port_PinMode</a>(<a class="code hl_define" href="core2for_a_w_s_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a>, <a class="code hl_enumvalue" href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dbab81270ba54ae4586a18415e5a579633d">UART</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (err == ESP_OK){</div>
<div class="line">        <a class="code hl_function" href="core2for_a_w_s_8c.html#a41a0d4cfbf16f792180d7ca55e664095">Core2ForAWS_Port_C_UART_Begin</a>(115200);</div>
<div class="line">        xTaskCreate(uart_rx_task, <span class="stringliteral">&quot;uart_rx&quot;</span>, 1024*2, NULL, configMAX_PRIORITIES, NULL);</div>
<div class="line">        xTaskCreate(uart_tx_task, <span class="stringliteral">&quot;uart_tx&quot;</span>, 1024*2, NULL, configMAX_PRIORITIES-1, NULL);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>A pointer to the message to be transmitted over UART2. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>The size of the message that you want to transmit. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The 0 or greater number of bytes pushed to the TX FIFO. A return value -1 represents an error in one of the provided parameters. </dd></dl>

</div>
</div>
<a id="a8b09041a7dedd7ae8cb776382478d191" name="a8b09041a7dedd7ae8cb776382478d191"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b09041a7dedd7ae8cb776382478d191">&#9670;&nbsp;</a></span>Core2ForAWS_Port_C_UART_Receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Core2ForAWS_Port_C_UART_Receive </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>message_buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads messages in the UART2 receiver ring buffer. </p>
<p >This is a helper function to simplify development with UART. This function is used to read messages stored in the receiver hardware FIFO buffer, which was configured to a maximum of UART_RX_BUF_SIZE.</p>
<p >This convenience methods provided in this BSP aims to simplify development at the expense of compatibility and performance. The usage of this function requires regular polling for any new messages. For some applications, it might offer significant performance benefits to set up an interrupt for handling and processing new data. For more information about UART communications on the Core2 for AWS IoT Kit using the ESP32 and how to create your own configuration, visit Espressif's official <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.2/esp32/api-reference/peripherals/uart.html">documentation</a>.</p>
<p >The example below sets the PORT_C_UART_TX_PIN (GPIO 14) pin mode to UART transmit, which will also set PORT_C_UART_RX_PIN (GPIO 13) to UART receiver, and sets the UART baud rate to 115200. It then starts two FreeRTOS tasks — one that transmits "Hello from AWS IoT
Kit" every two seconds and the other receives the message. The receiver task outputs the number of bytes read from the buffer, the number of bytes that remains unread in the ring buffer, and the message.</p>
<p >To receive the messages transmitted on the same device, run a female-female jumper wire from Port C's TX pin to PORT C's RX pin.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;freertos/FreeRTOS.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/task.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;driver/uart.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;driver/gpio.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2forAWS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a> = <span class="stringliteral">&quot;UART_DEMO&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_tx_task(<span class="keywordtype">void</span> *arg){</div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *message = <span class="stringliteral">&quot;Hello from AWS IoT Kit&quot;</span>;</div>
<div class="line">        <span class="keywordtype">size_t</span> message_len = strlen(message) + 1;</div>
<div class="line">        <a class="code hl_function" href="core2for_a_w_s_8c.html#aa205e433ced4fdae489d8165883c2f76">Core2ForAWS_Port_C_UART_Send</a>(message, message_len);</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(2000));</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_rx_task(<span class="keywordtype">void</span> *arg){</div>
<div class="line">    <span class="keywordtype">int</span> rxBytes;</div>
<div class="line">    uint8_t *data = heap_caps_malloc(<a class="code hl_define" href="core2for_a_w_s_8h.html#a1f25fe45d891de244a8135ae02fc9265">UART_RX_BUF_SIZE</a>, MALLOC_CAP_SPIRAM); <span class="comment">// Allocate space for message in external RAM</span></div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        rxBytes = <a class="code hl_function" href="core2for_a_w_s_8c.html#a8b09041a7dedd7ae8cb776382478d191">Core2ForAWS_Port_C_UART_Receive</a>(data);</div>
<div class="line">        <span class="keywordflow">if</span> (rxBytes &gt; 0) {</div>
<div class="line">            ESP_LOGI(<a class="code hl_define" href="i2c__device_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>, <span class="stringliteral">&quot;Read %d bytes from UART. Received: &#39;%s&#39;&quot;</span>, rxBytes, data);</div>
<div class="line">        }</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(100)); <span class="comment">// Read more frequently than transmit to ensure the messages are not erased from buffer.</span></div>
<div class="line">    }</div>
<div class="line">    free(data); <span class="comment">// Free memory from external RAM</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main(<span class="keywordtype">void</span>){</div>
<div class="line">    <a class="code hl_function" href="core2for_a_w_s_8c.html#a3d850a3f56bbe0685b60726d8b53bece">Core2ForAWS_Init</a>();</div>
<div class="line">    esp_err_t err = <a class="code hl_function" href="core2for_a_w_s_8c.html#a20b1459685901f232474236d0fc6c23f">Core2ForAWS_Port_PinMode</a>(<a class="code hl_define" href="core2for_a_w_s_8h.html#a8764a8d2c486f2d66f86d995653cc833">PORT_C_UART_TX_PIN</a>, <a class="code hl_enumvalue" href="core2for_a_w_s_8h.html#a77fecc1883f27c095012fbe56345c4dbab81270ba54ae4586a18415e5a579633d">UART</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (err == ESP_OK){</div>
<div class="line">        <a class="code hl_function" href="core2for_a_w_s_8c.html#a41a0d4cfbf16f792180d7ca55e664095">Core2ForAWS_Port_C_UART_Begin</a>(115200);</div>
<div class="line">        xTaskCreate(uart_rx_task, <span class="stringliteral">&quot;uart_rx&quot;</span>, 1024*2, NULL, configMAX_PRIORITIES, NULL);</div>
<div class="line">        xTaskCreate(uart_tx_task, <span class="stringliteral">&quot;uart_tx&quot;</span>, 1024*2, NULL, configMAX_PRIORITIES-1, NULL);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">message_buffer</td><td>The buffer which will contain the message read from the receiver hardware FIFO buffer. At maximum, it will be of size UART_RX_BUF_SIZE. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes read from the receiver FIFO buffer. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2cd914992d1bec1babd0a7ffba0f554b" name="a2cd914992d1bec1babd0a7ffba0f554b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cd914992d1bec1babd0a7ffba0f554b">&#9670;&nbsp;</a></span>button_left</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_button__t.html">Button_t</a>* button_left</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Left virtual touch button. </p>
<p >This is a virtual touch button which contains the definitions of a mapped region of the screen that corresponds to the button location and touch events from the FT6336U capacitive touch controller. When the screen is touched in the region that represents the left button, it will update the state of the button. You can use the APIs in the button library with this button as the input parameter to query the button's state.</p>
<p ><b>Example:</b></p>
<p >Print "left button pressed" when the on-screen left button is pressed. </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="button_8c.html#acf2b76f9c6fe8e6f8ac65ff1eff8ccdd">Button_WasPressed</a>(<a class="code hl_variable" href="core2for_a_w_s_8c.html#a2cd914992d1bec1babd0a7ffba0f554b">button_left</a>)) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;left button pressed&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="abutton_8c_html_acf2b76f9c6fe8e6f8ac65ff1eff8ccdd"><div class="ttname"><a href="button_8c.html#acf2b76f9c6fe8e6f8ac65ff1eff8ccdd">Button_WasPressed</a></div><div class="ttdeci">uint8_t Button_WasPressed(Button_t *button)</div><div class="ttdoc">See if the specified button was pressed.</div><div class="ttdef"><b>Definition:</b> button.c:43</div></div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a2cd914992d1bec1babd0a7ffba0f554b"><div class="ttname"><a href="core2for_a_w_s_8c.html#a2cd914992d1bec1babd0a7ffba0f554b">button_left</a></div><div class="ttdeci">Button_t * button_left</div><div class="ttdoc">Left virtual touch button.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:85</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a49b277909900db7e85d6be2841301fe7" name="a49b277909900db7e85d6be2841301fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49b277909900db7e85d6be2841301fe7">&#9670;&nbsp;</a></span>button_middle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_button__t.html">Button_t</a>* button_middle</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Middle virtual touch button. </p>
<p >This is a virtual touch button which contains the definitions of a mapped region of the screen that corresponds to the button location and touch events from the FT6336U capacitive touch controller. When the screen is touched in the region that represents the middle button, it will update the state of the button. You can use the APIs in the button library with this button as the input parameter to query the button's state.</p>
<p ><b>Example:</b></p>
<p >Print "middle button pressed" when the on-screen middle button is pressed. </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="button_8c.html#acf2b76f9c6fe8e6f8ac65ff1eff8ccdd">Button_WasPressed</a>(<a class="code hl_variable" href="core2for_a_w_s_8c.html#a49b277909900db7e85d6be2841301fe7">button_middle</a>)) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;middle button pressed&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a49b277909900db7e85d6be2841301fe7"><div class="ttname"><a href="core2for_a_w_s_8c.html#a49b277909900db7e85d6be2841301fe7">button_middle</a></div><div class="ttdeci">Button_t * button_middle</div><div class="ttdoc">Middle virtual touch button.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:86</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ab6cde5989a3afec96cce115746efc606" name="ab6cde5989a3afec96cce115746efc606"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6cde5989a3afec96cce115746efc606">&#9670;&nbsp;</a></span>button_right</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_button__t.html">Button_t</a>* button_right</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Right virtual touch button. </p>
<p >This is a virtual touch button which contains the definitions of a mapped region of the screen that corresponds to the button location and touch events from the FT6336U capacitive touch controller. When the screen is touched in the region that represents the right button, it will update the state of the button. You can use the APIs in the button library with this button as the input parameter to query the button's state.</p>
<p ><b>Example:</b></p>
<p >Print "right button pressed" when the on-screen right button is pressed.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="button_8c.html#acf2b76f9c6fe8e6f8ac65ff1eff8ccdd">Button_WasPressed</a>(<a class="code hl_variable" href="core2for_a_w_s_8c.html#ab6cde5989a3afec96cce115746efc606">button_right</a>)) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;right button pressed&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_ab6cde5989a3afec96cce115746efc606"><div class="ttname"><a href="core2for_a_w_s_8c.html#ab6cde5989a3afec96cce115746efc606">button_right</a></div><div class="ttdeci">Button_t * button_right</div><div class="ttdoc">Right virtual touch button.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:87</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a04cd1767c994343c4548fb3932fb3cfc" name="a04cd1767c994343c4548fb3932fb3cfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04cd1767c994343c4548fb3932fb3cfc">&#9670;&nbsp;</a></span>px</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pixel_settings_t px</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2a1ad60c25ec8207f8d723197855a1a1" name="a2a1ad60c25ec8207f8d723197855a1a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a1ad60c25ec8207f8d723197855a1a1">&#9670;&nbsp;</a></span>xGuiSemaphore</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SemaphoreHandle_t xGuiSemaphore</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FreeRTOS semaphore to be used when performing any operation on the display. </p>
<p >To avoid conflicts with multiple threads attempting to write to the display, take this FreeRTOS semaphore first, use the <a href="https://docs.lvgl.io/7.11/widgets/index.html">LVGL widget</a> API of choice, and then give the semaphore. The FreeRTOS task, guiTask(), will write to the ILI9342C display controller to update the display.</p>
<p ><b>Example:</b></p>
<p >Create a LVGL label widget, set the text of the label to "Hello World!", and align the label to the center of the screen. </p><div class="fragment"><div class="line">xSemaphoreTake(<a class="code hl_variable" href="core2for_a_w_s_8c.html#a2a1ad60c25ec8207f8d723197855a1a1">xGuiSemaphore</a>, portMAX_DELAY);</div>
<div class="line"> </div>
<div class="line">lv_obj_t * hello_label = lv_label_create(NULL, NULL);</div>
<div class="line">lv_label_set_text_static(hello_label, <span class="stringliteral">&quot;Hello World!&quot;</span>);</div>
<div class="line">lv_obj_align(hello_label, NULL, LV_ALIGN_CENTER, 0, 0);</div>
<div class="line"> </div>
<div class="line">xSemaphoreGive(<a class="code hl_variable" href="core2for_a_w_s_8c.html#a2a1ad60c25ec8207f8d723197855a1a1">xGuiSemaphore</a>);</div>
<div class="ttc" id="acore2for_a_w_s_8c_html_a2a1ad60c25ec8207f8d723197855a1a1"><div class="ttname"><a href="core2for_a_w_s_8c.html#a2a1ad60c25ec8207f8d723197855a1a1">xGuiSemaphore</a></div><div class="ttdeci">SemaphoreHandle_t xGuiSemaphore</div><div class="ttdoc">FreeRTOS semaphore to be used when performing any operation on the display.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:271</div></div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
